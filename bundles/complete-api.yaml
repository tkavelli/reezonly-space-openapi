openapi: 3.1.0
info:
  title: Reezonly Space Platform API
  version: 1.0.0
  description: |
    **Руководство интеграций Reezonly Space** — это главный источник информации, благодаря которому внешние CRM, CMS, ERP и маркетинговые системы быстро подключают программный доступ к Space API.

    Здесь собраны схемы аутентификации, бизнес‑блоки пользователей, групп, курсов, сертификатов и отчетов, примеры запросов и схемы ответов. Документация рассказывает, как синхронизировать пользователей, подтянуть группы и права из вашей CRM, создавать курсы и выгружать отчеты — все через безопасный `X-API-Key` и понятные бизнес-сущности.

    ## Обзор платформы

    - **Управление пользователями** — группы с вложенностью, сегментация, импорт, лимиты
    - **CMS** — конструктор лендингов, страниц, меню, SEO
    - **Платёжный шлюз** — приём платежей (ЮMoney, Robokassa)
    - **Маркетинг** — email-рассылки (13 системных событий), формы, wait-list
    - **Сертификаты** — генерация PDF-документов
    - **Каталог курсов** — витрина (контент курсов в LMS)
    - **Интеграция с LMS** — iframe, webhook, API для курсов

    ## Аутентификация

    Для доступа к API необходимо использовать **API Key** в заголовке запроса:

    ```
    X-API-Key: your_api_key_here
    ```

    ## Базовый URL

    ```
    https://your-space-domain.com/api/v1
    ```
servers:
  - url: https://your-space-domain.com/api/v1
    description: Production server
  - url: https://staging-space-domain.com/api/v1
    description: Staging server
  - url: http://localhost:8080/api/v1
    description: Development server
x-servers:
  - url: https://your-space-domain.com/api/v1
    description: Production
  - url: https://staging-space-domain.com/api/v1
    description: Staging
  - url: http://localhost:8080/api/v1
    description: Local
security:
  - ApiKeyAuth: []
tags:
  - name: Users.Operations
    description: |
      ## Операции с пользователями

      **Назначение:** централизованно создать, прочитать, обновить и удалить пользователей, сохраняя синхронизацию с LMS и бизнес-ролями.
      **Ключевые особенности:**
      - Протоколированная магистраль CRUD по `X-API-Key` с фильтрами/пагинацией.
      - Полный сет схем `SuccessResponse`, `BadRequest`, `Forbidden`, `NotFound`, и `User`.
      - Поддержка массовых операций (`delete?ids[]=`) и отдельных просмотров.
      **Пример Use case:** интегратор CRM запрашивает `/user/user/index` для списка, показывает карточку и вызывает `PUT /user/user/update`, чтобы синхронно обновить кастомные поля и статусы.
  - name: Users.Courses
    description: |
      ## Управление доступом пользователей к курсам

      **Назначение:** быстро назначать/отзывать доступ к курсам из внешней LMS/CRM.
      **Ключевые особенности:** набор `POST /add-course`/`POST /delete-course` с телом `user_id` + `course_ids`, проверка доступности и массовые обновления.
      **Пример Use case:** маркетолог настраивает доступ студентов к новому продукту: сначала назначает нужный набор курсов, затем отзывает старые.
  - name: Users.Import
    description: |
      ## Импорт пользователей

      **Назначение:** загружать сотни пользователей и отслеживать прогресс асинхронно.
      **Ключевые особенности:** предварительный `preview` (multipart с шаблоном), `load` создаёт задачу, `get-import-progress` возвращает `ImportStatus`, дополнительные отчёты XLSX.
      **Пример Use case:** после оплаты клиент загружает Excel, смотрит превью, запускает импорт и регулярно проверяет статус, пока не получит финальный файл через `/user/importreport/download`.
  - name: Users.Fields
    description: |
      ## Кастомные поля пользователей

      **Назначение:** предоставлять актуальные метаданные профиля (customer attributes, achievements, tokens).
      **Ключевые особенности:** простой список полей `/dictionary/user/fields`, возвращаемая схема `UserField`.
      **Пример Use case:** мобильное приложение запрашивает доступные поля, чтобы показать динамическую форму регистрации с нужными полями и валидацией.
  - name: Groups.Structure
    description: |
      ## Структура и иерархия групп

      **Назначение:** выстроить иерархию корпоративных групп с поддержкой вложенности, фильтрации и синхронизации с продуктами/ролями.
      **Ключевые особенности:**
      - Родительские связи, проверка циклов, фильтры по статусу/group type и `PaginationMeta`.
      - Используются схемы `Group`, `GroupListItem` и стандартные ответы на ошибки.
      **Пример Use case:** интегратор CRM подстраивает дерево отделов: получает групповой каталог, создаёт новый подраздел с `POST /v1/group/group/create`, затем проверяет структуру через `/v1/group/group/view`.
  - name: Groups.Members
    description: |
      ## Управление участниками групп

      **Назначение:** массово добавлять/удалять пользователей и назначать курсы для групп на стороне интеграции.
      **Ключевые особенности:** простые payload’ы (`user_id`, `course_ids`, списки `ids[]`), поддержка экспорта, `assign-courses` для курсов, `DELETE /multiple-delete`.
      **Пример Use case:** HR переносит 50 сотрудников между группами, одновременно обновляя назначенные курсы через `POST /group/group/assign-courses`, а затем скачивает экспорт структуры (`/group/group/export`).
  - name: Certificates.Templates
    description: |
      ## Шаблоны сертификатов (read-only)

      Управление шаблонами для генерации PDF сертификатов. Шаблоны определяют внешний вид сертификата, расположение элементов и переменные для подстановки данных.
  - name: Certificates.Issued
    description: |
      ## Выданные сертификаты

      Управление выданными сертификатами, их статусами и верификацией.
  - name: Certificates.Lookups
    description: |
      ## Справочники для сертификатов

      Системные справочники и настройки, связанные с сертификатами.
  - name: Courses
    description: |
      ## Курсы и обучающие продукты (только чтение)

      **Назначение:** предоставить актуальные метаданные курсов и продуктов для внешних витрин, маркетинговых страниц и CRM.
      **Ключевые особенности:** постраничная выдача (`/course/course/index`), подробные описания структуры и уроков, атрибуты активности (`students_count`, `enabled`, `status`, `picture`, `lms_id`).
      **Пример Use case:** маркетинговая команда из внешнего CMS подгружает `/course/course/index`, показывает список продуктов с картинками и вызывает `/course/course/view` для раскрытия программы и уроков.
  - name: Pages
    description: |
      ## Страницы и контент сайта (только чтение)

      **Назначение:** раскрыть структуру публичных и закрытых страниц сайта, чтобы сторонние CMS могли отображать лендинги и меню.
      **Ключевые особенности:** подробный список типов страниц (`/dictionary/dictionary/page-types`), фильтруемая выдача `pages`, статус `enabled`, SEO-метаданные, `alias` и `category`.
      **Пример Use case:** внешняя система заимствует SPA-меню, вызывает `/dictionary/dictionary/pages`, сортирует по типу и обновляет ссылки на новом сайте без доступа к внутреннему CMS.
  - name: Integration Reports
    description: |
      ## Отчеты для интеграционных систем

      Генерация данных «Сводного» отчёта в JSON для BI/дашбордов без генерации файлов.
paths:
  /user/user/index:
    get:
      tags:
        - Users.Operations
      summary: Получить список всех пользователей
      description: Возвращает список всех пользователей с фильтрацией, сортировкой и пагинацией
      parameters:
        - in: query
          name: page
          description: Номер страницы для пагинации
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
            example: 1
        - in: query
          name: per-page
          description: Количество элементов на странице (максимум 100)
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
            example: 50
        - in: query
          name: search
          description: Поисковый запрос для фильтрации результатов
          required: false
          schema:
            type: string
            example: ivan
      responses:
        '200':
          description: Список пользователей успешно получен
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: integer
                              example: 137
                            email:
                              type: string
                              format: email
                              example: user@example.com
                            name:
                              type: string
                              example: Иван Иванов
                            role:
                              type: string
                              enum:
                                - admin
                                - editor
                                - curator
                                - student
                              x-enumDescriptions:
                                admin: Администратор (полный доступ)
                                editor: Контент-редактор
                                curator: Куратор/методист
                                student: Ученик/слушатель
                              example: student
                            status:
                              type: string
                              enum:
                                - active
                                - inactive
                                - blocked
                              x-enumDescriptions:
                                active: Активный пользователь
                                inactive: Неактивный (архив/черновик)
                                blocked: Заблокирован (без доступа)
                              example: active
                            created_at:
                              type: string
                              format: date-time
                              example: '2024-01-15T10:30:00Z'
                            updated_at:
                              type: string
                              format: date-time
                              example: '2024-01-15T10:30:00Z'
        '400':
          description: Ошибка в запросе (неверные параметры)
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  email:
                    - Некорректный email
                  page:
                    - page must be >= 1
  /user/user/admin:
    get:
      tags:
        - Users.Operations
      summary: Получить список администраторов
      description: Возвращает список всех пользователей с правами администратора
      parameters:
        - in: query
          name: page
          description: Номер страницы для пагинации
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
            example: 1
        - in: query
          name: per-page
          description: Количество элементов на странице (максимум 100)
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
            example: 50
      responses:
        '200':
          description: Список пользователей успешно получен
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: integer
                              example: 137
                            email:
                              type: string
                              format: email
                              example: user@example.com
                            name:
                              type: string
                              example: Иван Иванов
                            role:
                              type: string
                              enum:
                                - admin
                                - editor
                                - curator
                                - student
                              x-enumDescriptions:
                                admin: Администратор (полный доступ)
                                editor: Контент-редактор
                                curator: Куратор/методист
                                student: Ученик/слушатель
                              example: student
                            status:
                              type: string
                              enum:
                                - active
                                - inactive
                                - blocked
                              x-enumDescriptions:
                                active: Активный пользователь
                                inactive: Неактивный (архив/черновик)
                                blocked: Заблокирован (без доступа)
                              example: active
                            created_at:
                              type: string
                              format: date-time
                              example: '2024-01-15T10:30:00Z'
                            updated_at:
                              type: string
                              format: date-time
                              example: '2024-01-15T10:30:00Z'
        '400':
          description: Ошибка в запросе (неверные параметры)
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  email:
                    - Некорректный email
                  page:
                    - page must be >= 1
        '403':
          description: Доступ запрещен (недостаточно прав)
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  access:
                    - Недостаточно прав для выполнения операции
  /user/user/view:
    get:
      tags:
        - Users.Operations
      summary: Получить детальную информацию о пользователе
      description: Возвращает полную информацию о пользователе включая его группы, курсы и кастомные поля
      parameters:
        - in: query
          name: id
          description: Идентификатор ресурса
          required: true
          schema:
            type: integer
            minimum: 1
            example: 42
      responses:
        '200':
          description: Успешно получена информация о пользователе
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 137
                          email:
                            type: string
                            format: email
                            example: user@example.com
                          name:
                            type: string
                            example: Иван Иванов
                          role:
                            type: string
                            enum:
                              - admin
                              - editor
                              - curator
                              - student
                            x-enumDescriptions:
                              admin: Администратор (полный доступ)
                              editor: Контент-редактор
                              curator: Куратор/методист
                              student: Ученик/слушатель
                            example: student
                          status:
                            type: string
                            enum:
                              - active
                              - inactive
                              - blocked
                            x-enumDescriptions:
                              active: Активный пользователь
                              inactive: Неактивный (архив/черновик)
                              blocked: Заблокирован (без доступа)
                            example: active
                          created_at:
                            type: string
                            format: date-time
                            example: '2024-01-15T10:30:00Z'
                          updated_at:
                            type: string
                            format: date-time
                            example: '2024-01-15T10:30:00Z'
        '404':
          description: Ресурс не найден
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  id:
                    - Ресурс не найден
  /dictionary/user/fields:
    get:
      tags:
        - Users.Fields
      summary: Получить список кастомных полей пользователя
      description: Возвращает все доступные кастомные поля профилей пользователей
      responses:
        '200':
          description: Успешно получен список кастомных полей
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: integer
                              description: ID поля
                              example: 789
                            name:
                              type: string
                              description: Имя поля (system name)
                              example: experience_years
                            label:
                              type: string
                              description: Отображаемое название поля
                              example: Опыт работы (лет)
                            type:
                              type: string
                              enum:
                                - string
                                - number
                                - date
                                - boolean
                                - select
                              description: Тип поля
                              example: number
                            required:
                              type: boolean
                              description: Обязательное ли поле
                              example: false
                            enabled:
                              type: boolean
                              description: Активно ли поле
                              example: true
                            validation_rules:
                              type: object
                              description: Правила валидации
                              example:
                                min: 0
                                max: 50
                            options:
                              type: array
                              items:
                                type: string
                              description: Варианты для select полей
                              example:
                                - 0-1
                                - 2-5
                                - 6-10
                                - 10+
        '400':
          description: Ошибка в запросе (неверные параметры)
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  email:
                    - Некорректный email
                  page:
                    - page must be >= 1
        '403':
          description: Доступ запрещен (недостаточно прав)
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  access:
                    - Недостаточно прав для выполнения операции
  /user/user/create:
    post:
      tags:
        - Users.Operations
      summary: Создать нового пользователя
      description: |
        Создает нового пользователя в системе с возможностью назначения роли.
        Автоматически синхронизирует пользователя с LMS и отправляет уведомления.

        **Валидация:**
        - Email должен быть уникальным в системе
        - Username обязателен, минимальная длина 2 символа, максимальная 255
        - Роль должна существовать в системе (не из списка RESTRICTED_ROLES)
        - Проверяется лимит пользователей тарифа

        **Бизнес-логика:**
        - При создании администратора отправляется email с паролем
        - Для обычных пользователей также отправляется уведомление
        - Автоматическая синхронизация с LMS через очередь
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - username
                - email
              properties:
                username:
                  type: string
                  minLength: 2
                  maxLength: 255
                  description: |
                    Имя пользователя. Обязательное поле.
                    - Минимум 2 символа
                    - Максимум 255 символов
                    - Trim automatically applied
                  example: Иван Петров
                email:
                  type: string
                  format: email
                  description: |
                    Email пользователя. Должен быть уникальным в системе.
                    - Trim automatically applied
                    - Valid email format required
                  example: ivan.petrov@example.com
                password:
                  type: string
                  description: |
                    Пароль пользователя. Если не указан, генерируется автоматически.
                    - Для существующих сотрудников не требуется
                    - Для новых пользователей рекомендуется задавать
                  example: SecurePassword123!
                role:
                  type: string
                  description: |
                    Роль пользователя в системе. По умолчанию 'user'.
                    - Не может быть из списка RESTRICTED_ROLES
                    - Доступные роли: superadmin, admin, editor, curator, student
                  example: student
                  enum:
                    - superadmin
                    - admin
                    - editor
                    - curator
                    - student
                department:
                  type: string
                  description: |
                    Отдел пользователя. Синхронизируется с LMS.
                  example: IT отдел
                position:
                  type: string
                  description: |
                    Должность пользователя. Синхронизируется с LMS.
                  example: Разработчик
                phone:
                  type: string
                  description: |
                    Телефон пользователя
                  example: +7 (999) 123-45-67
                custom_fields:
                  type: object
                  description: |
                    Дополнительные поля пользователя (custom fields)
                    Ключи - это имена полей, значения - данные
                  example:
                    city: Москва
                    experience: 5 лет
                    skills:
                      - PHP
                      - JavaScript
                      - MySQL
                group_ids:
                  type: array
                  description: Список идентификаторов групп, к которым добавляется пользователь
                  items:
                    type: integer
                    minimum: 1
                  example:
                    - 12
                    - 34
                course_ids:
                  type: array
                  description: Список идентификаторов курсов для назначения
                  items:
                    type: integer
                    minimum: 1
                  example:
                    - 501
                    - 502
            examples:
              basic_user:
                summary: Создание обычного пользователя
                value:
                  username: Иван Петров
                  email: ivan.petrov@example.com
                  department: IT отдел
                  position: Разработчик
              admin_user:
                summary: Создание администратора
                value:
                  username: Мария Сидорова
                  email: maria.sidorova@example.com
                  role: admin
                  department: HR
                  position: HR менеджер
                  password: SecurePassword123!
                  group_ids:
                    - 12
                    - 34
                  course_ids:
                    - 501
                    - 502
      responses:
        '201':
          description: Пользователь успешно создан
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          id:
                            type: integer
                            description: Уникальный идентификатор пользователя
                            example: 123
                          username:
                            type: string
                            description: Имя пользователя
                            example: Иван Петров
                          email:
                            type: string
                            format: email
                            description: Email пользователя
                            example: ivan.petrov@example.com
                          role:
                            type: string
                            description: Роль пользователя
                            example: student
                          status:
                            type: string
                            description: Статус пользователя
                            enum:
                              - active
                              - inactive
                              - blocked
                            example: active
                          department:
                            type: string
                            description: Отдел
                            example: IT отдел
                          position:
                            type: string
                            description: Должность
                            example: Разработчик
                          phone:
                            type: string
                            description: Телефон
                            example: +7 (999) 123-45-67
                          photo:
                            type: string
                            format: uri
                            description: URL фотографии пользователя (S3)
                            example: https://s3.amazonaws.com/bucket/users/photos/123.jpg
                          created_at:
                            type: string
                            format: date-time
                            description: Дата создания пользователя
                            example: '2025-01-15T10:30:00Z'
                          updated_at:
                            type: string
                            format: date-time
                            description: Дата последнего обновления
                            example: '2025-01-15T10:30:00Z'
                          last_login_at:
                            type: string
                            format: date-time
                            description: Дата последнего входа
                            example: '2025-01-16T09:15:00Z'
                          email_verified:
                            type: boolean
                            description: Подтвержден ли email
                            example: true
                          custom_fields:
                            type: object
                            description: Дополнительные поля пользователя
                            example:
                              city: Москва
                              experience: 5 лет
              examples:
                user_created:
                  summary: Пользователь создан
                  value:
                    success: true
                    data:
                      id: 123
                      username: Иван Петров
                      email: ivan.petrov@example.com
                      role: student
                      status: active
                      department: IT отдел
                      position: Разработчик
                      created_at: '2025-01-15T10:30:00Z'
        '400':
          description: Ошибка валидации
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              examples:
                validation_error:
                  summary: Ошибка валидации email
                  value:
                    success: false
                    errors:
                      email:
                        - Email адрес уже занят
                user_limit_error:
                  summary: Достигнут лимит пользователей
                  value:
                    success: false
                    errors:
                      username:
                        - New user registration is not available
        '403':
          description: Недостаточно прав для создания пользователя
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  permission:
                    - Insufficient permissions
  /user/user/update:
    put:
      tags:
        - Users.Operations
      summary: Обновить данные пользователя
      description: Обновляет информацию о существующем пользователе
      parameters:
        - in: query
          name: id
          description: Идентификатор ресурса
          required: true
          schema:
            type: integer
            minimum: 1
            example: 42
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 2
                  description: Полное имя пользователя
                password:
                  type: string
                  minLength: 6
                  description: Новый пароль
                role:
                  type: string
                  enum:
                    - admin
                    - editor
                    - curator
                    - student
                  description: Роль пользователя
                status:
                  type: string
                  enum:
                    - active
                    - inactive
                    - blocked
                  description: Статус пользователя
                custom_fields:
                  type: object
                  description: Кастомные поля для обновления
                group_ids:
                  type: array
                  description: Список идентификаторов групп для привязки
                  items:
                    type: integer
                    minimum: 1
                course_ids:
                  type: array
                  description: Список идентификаторов курсов для назначения
                  items:
                    type: integer
                    minimum: 1
      responses:
        '200':
          description: Успешное выполнение операции
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      message:
                        type: string
                        example: Operation completed successfully
        '400':
          description: Ошибка валидации данных
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  password:
                    - Password must be at least 6 characters
        '404':
          description: Ресурс не найден
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  id:
                    - Ресурс не найден
  /user/user/delete:
    delete:
      tags:
        - Users.Operations
      summary: Удалить пользователей
      description: Удаляет одного или нескольких пользователей
      parameters:
        - in: query
          name: ids[]
          description: Массив идентификаторов для массовых операций (максимум 100 элементов)
          required: true
          schema:
            type: array
            items:
              type: integer
              minimum: 1
            maxItems: 100
            example:
              - 12
              - 15
              - 20
      responses:
        '200':
          description: Успешное выполнение операции
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      message:
                        type: string
                        example: Operation completed successfully
        '400':
          description: Ошибка в запросе (неверные параметры)
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  email:
                    - Некорректный email
                  page:
                    - page must be >= 1
  /dictionary/user/statuses:
    get:
      tags:
        - Users.Operations
      summary: Получить расширенные статусы пользователей
      description: Возвращает все возможные статусы пользователей в системе
      responses:
        '200':
          description: Успешно получен список статусов пользователей
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                              description: Системный код статуса
                              example: active
                            name:
                              type: string
                              description: Отображаемое название статуса
                              example: Активный
                            description:
                              type: string
                              description: Расширенное описание статуса
                              example: Пользователь с активной учётной записью
                            category:
                              type: string
                              description: Группа статусов (например, access, pending, blocked)
                              example: access
                            color:
                              type: string
                              description: Цветовой код статуса (hex)
                              example: '#2ea44f'
                            is_default:
                              type: boolean
                              description: Является ли статус статусом по умолчанию при создании
                              example: true
                          example:
                            id: active
                            name: Активный
                            description: Пользователь с полной активной учётной записью
                            category: access
                            color: '#2ea44f'
                            is_default: true
        '400':
          description: Ошибка в запросе (неверные параметры)
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  email:
                    - Некорректный email
                  page:
                    - page must be >= 1
        '403':
          description: Доступ запрещен (недостаточно прав)
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  access:
                    - Недостаточно прав для выполнения операции
  /user/user/add-course:
    post:
      tags:
        - Users.Courses
      summary: Назначить курсы пользователю
      description: Добавляет доступ пользователя к указанным курсам
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - user_id
                - course_ids
              properties:
                user_id:
                  type: integer
                  minimum: 1
                  description: ID пользователя
                course_ids:
                  type: array
                  items:
                    type: integer
                    minimum: 1
                  description: Массив ID курсов для назначения
      responses:
        '200':
          description: Успешное выполнение операции
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      message:
                        type: string
                        example: Operation completed successfully
        '400':
          description: Ошибка в запросе (неверные параметры)
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  email:
                    - Некорректный email
                  page:
                    - page must be >= 1
  /user/user/delete-course:
    post:
      tags:
        - Users.Courses
      summary: Отозвать доступ к курсам
      description: Удаляет доступ пользователя к указанным курсам
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - user_id
                - course_ids
              properties:
                user_id:
                  type: integer
                  minimum: 1
                  description: ID пользователя
                course_ids:
                  type: array
                  items:
                    type: integer
                    minimum: 1
                  description: Массив ID курсов для отзыва доступа
      responses:
        '200':
          description: Успешное выполнение операции
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      message:
                        type: string
                        example: Operation completed successfully
        '400':
          description: Ошибка в запросе (неверные параметры)
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  email:
                    - Некорректный email
                  page:
                    - page must be >= 1
  /user/user/preview:
    post:
      tags:
        - Users.Import
      summary: Предпросмотр импорта Excel-файла
      description: Анализирует Excel файл и показывает preview данных для импорта
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - file
              properties:
                file:
                  type: string
                  format: binary
                  description: Excel файл для импорта (.xlsx, .xls)
      responses:
        '200':
          description: Успешно проанализирован файл
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: object
                      total_rows:
                        type: integer
                      preview:
                        type: array
                        items:
                          type: object
                      errors:
                        type: array
                        items:
                          type: string
        '400':
          description: Ошибка в запросе (неверные параметры)
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  email:
                    - Некорректный email
                  page:
                    - page must be >= 1
  /user/user/load:
    post:
      tags:
        - Users.Import
      summary: Запустить импорт пользователей (асинхронно)
      description: Запускает фоновый процесс импорта пользователей из Excel файла
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - file
              properties:
                file:
                  type: string
                  format: binary
                  description: Excel файл для импорта
                update_existing:
                  type: boolean
                  default: false
                  description: Обновлять существующих пользователей
                default_role:
                  type: string
                  enum:
                    - admin
                    - editor
                    - curator
                    - student
                  default: student
                  description: Роль по умолчанию для новых пользователей
      responses:
        '200':
          description: Импорт успешно запущен
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          id:
                            type: string
                            example: import_123456
                          status:
                            type: string
                            enum:
                              - pending
                              - processing
                              - completed
                              - failed
                            x-enumDescriptions:
                              pending: Задача создана, ожидает запуска
                              processing: Импорт выполняется
                              completed: Импорт успешно завершён
                              failed: Импорт завершился ошибкой
                            example: processing
                          progress:
                            type: object
                            properties:
                              total:
                                type: integer
                                example: 1000
                              processed:
                                type: integer
                                example: 650
                              errors:
                                type: integer
                                example: 5
                          started_at:
                            type: string
                            format: date-time
                            example: '2024-01-15T10:30:00Z'
                          estimated_completion:
                            type: string
                            format: date-time
                            example: '2024-01-15T11:00:00Z'
        '400':
          description: Ошибка в запросе (неверные параметры)
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  email:
                    - Некорректный email
                  page:
                    - page must be >= 1
  /user/user/get-import-progress:
    get:
      tags:
        - Users.Import
      summary: Получить статус текущего импорта
      description: Возвращает текущий статус и прогресс импорта пользователей
      parameters:
        - name: id
          in: query
          required: true
          schema:
            type: string
          description: ID импорта (из ответа метода load)
      responses:
        '200':
          description: Успешно получен статус импорта
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          id:
                            type: string
                            example: import_123456
                          status:
                            type: string
                            enum:
                              - pending
                              - processing
                              - completed
                              - failed
                            x-enumDescriptions:
                              pending: Задача создана, ожидает запуска
                              processing: Импорт выполняется
                              completed: Импорт успешно завершён
                              failed: Импорт завершился ошибкой
                            example: processing
                          progress:
                            type: object
                            properties:
                              total:
                                type: integer
                                example: 1000
                              processed:
                                type: integer
                                example: 650
                              errors:
                                type: integer
                                example: 5
                          started_at:
                            type: string
                            format: date-time
                            example: '2024-01-15T10:30:00Z'
                          estimated_completion:
                            type: string
                            format: date-time
                            example: '2024-01-15T11:00:00Z'
        '400':
          description: Ошибка в запросе (неверные параметры)
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  email:
                    - Некорректный email
                  page:
                    - page must be >= 1
        '404':
          description: Ресурс не найден
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  id:
                    - Ресурс не найден
  /user/user/load-template:
    get:
      tags:
        - Users.Import
      summary: Скачать шаблон Excel для импорта
      description: Возвращает Excel файл с шаблоном для импорта пользователей
      responses:
        '200':
          description: Успешно скачан файл шаблона
          content:
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                type: string
                format: binary
        '400':
          description: Ошибка в запросе (неверные параметры)
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  email:
                    - Некорректный email
                  page:
                    - page must be >= 1
        '404':
          description: Ресурс не найден
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  id:
                    - Ресурс не найден
  /user/import-report/index:
    get:
      tags:
        - Users.Import
      summary: Получить список завершённых отчётов импорта
      description: Возвращает список всех завершенных отчётов импорта пользователей
      parameters:
        - in: query
          name: page
          description: Номер страницы для пагинации
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
            example: 1
        - in: query
          name: per-page
          description: Количество элементов на странице (максимум 100)
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
            example: 50
      responses:
        '200':
          description: Успешно получен список отчётов импорта
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                            filename:
                              type: string
                            status:
                              type: string
                            created_at:
                              type: string
                            completed_at:
                              type: string
        '400':
          description: Ошибка в запросе (неверные параметры)
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  email:
                    - Некорректный email
                  page:
                    - page must be >= 1
  /user/importreport/download:
    get:
      tags:
        - Users.Import
      summary: Скачать XLSX с результатами импорта
      description: Возвращает Excel файл с детальными результатами импорта
      parameters:
        - in: query
          name: id
          description: Идентификатор ресурса
          required: true
          schema:
            type: integer
            minimum: 1
            example: 42
      responses:
        '200':
          description: Успешно скачан файл отчёта импорта
          content:
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                type: string
                format: binary
        '404':
          description: Ресурс не найден
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  id:
                    - Ресурс не найден
  /group/group/index:
    post:
      tags:
        - Groups.Structure
      summary: Получить список групп с пагинацией и фильтрацией
      description: |
        Возвращает список групп с поддержкой пагинации, поиска и иерархической фильтрации.
        Можно фильтровать по родительской группе, искать по названию и описанию.
        Поддерживает сортировку по количеству пользователей и дате обновления.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                page:
                  type: integer
                  minimum: 1
                  default: 1
                  description: Номер страницы
                per_page:
                  type: integer
                  minimum: 1
                  maximum: 100
                  default: 20
                  description: Элементов на странице
                parent_id:
                  oneOf:
                    - type: integer
                      minimum: 1
                    - type: 'null'
                  description: |
                    Фильтр по родительской группе:
                    - `null` - только корневые группы
                    - `int` - группы внутри указанного родителя
                    - не указан - все группы
                search:
                  type: string
                  maxLength: 255
                  description: Поиск по названию или описанию группы
                sort:
                  type: string
                  enum:
                    - name
                    - user_count
                    - created_at
                    - updated_at
                  default: name
                  description: Поле сортировки
                order:
                  type: string
                  enum:
                    - asc
                    - desc
                  default: asc
                  description: Направление сортировки
                include_default:
                  type: boolean
                  default: false
                  description: |
                    Включить системные группы по умолчанию:
                    - `false` - только пользовательские группы
                    - `true` - все группы включая системные
      responses:
        '200':
          description: Успешный ответ с отфильтрованным списком групп
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          allOf:
                            - type: object
                              properties:
                                id:
                                  type: integer
                                  description: Уникальный идентификатор группы
                                  example: 1
                                name:
                                  type: string
                                  description: Название группы
                                  example: IT Department
                                comment:
                                  type: string
                                  description: Описание группы
                                  example: Разработка и поддержка IT систем
                                hierarchyPathString:
                                  type: string
                                  description: Полный иерархический путь группы
                                  example: Company / IT Department / Development Team
                                userCount:
                                  type: integer
                                  description: Количество пользователей в группе
                                  example: 25
                                type:
                                  type: integer
                                  description: Тип группы (1=гостевая, 2=авторизованных, 9=по умолчанию)
                                  example: 2
                                parent_id:
                                  oneOf:
                                    - type: integer
                                      minimum: 1
                                    - type: 'null'
                                  description: ID родительской группы
                                  example: null
                                image:
                                  oneOf:
                                    - type: string
                                      format: uri
                                    - type: 'null'
                                  description: URL изображения группы
                                  example: https://s3.reezonly.com/groups/it-dept.jpg
                                created_at:
                                  type: string
                                  format: date-time
                                  description: Дата создания
                                  example: '2023-08-25T14:15:43Z'
                                updated_at:
                                  type: string
                                  format: date-time
                                  description: Дата обновления
                                  example: '2023-08-25T14:15:43Z'
                            - type: object
                              properties:
                                parent:
                                  type: object
                                  description: Информация о родительской группе
                                  properties:
                                    id:
                                      type: integer
                                    name:
                                      type: string
                                  nullable: true
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
              examples:
                groups_list:
                  summary: Список групп с пагинацией
                  value:
                    success: true
                    data:
                      - id: 1
                        name: IT Department
                        comment: Разработка и поддержка IT систем
                        hierarchyPathString: IT Department
                        userCount: 25
                        type: 2
                        image: https://s3.reezonly.com/groups/it-dept.jpg
                        created_at: '2023-08-25T14:15:43Z'
                        updated_at: '2023-08-25T14:15:43Z'
                      - id: 2
                        name: Development Team
                        comment: Frontend и backend разработка
                        hierarchyPathString: IT Department / Development Team
                        userCount: 15
                        type: 2
                        parent_id: 1
                        image: null
                        created_at: '2023-08-25T15:20:10Z'
                        updated_at: '2023-08-25T15:20:10Z'
                    meta:
                      page: 1
                      per_page: 20
                      total: 2
        '400':
          description: Ошибка валидации данных
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  password:
                    - Password must be at least 6 characters
        '403':
          description: Доступ запрещен (недостаточно прав)
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  access:
                    - Недостаточно прав для выполнения операции
  /group/group/view:
    get:
      tags:
        - Groups.Structure
      summary: Получить детальную информацию о группе
      description: |
        Возвращает полную информацию о группе включая всех участников,
        дочерние группы и правила доступа. Используется для детального просмотра
        группы в административном интерфейсе.
      parameters:
        - name: id
          in: query
          required: true
          schema:
            type: integer
            minimum: 1
          description: ID группы
        - name: include_users
          in: query
          schema:
            type: boolean
            default: true
          description: Включить список пользователей группы
        - name: include_children
          in: query
          schema:
            type: boolean
            default: true
          description: Включить дочерние группы
        - name: users_page
          in: query
          schema:
            type: integer
            minimum: 1
            default: 1
          description: Страница пользователей (при include_users=true)
      responses:
        '200':
          description: Детальная информация о группе
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        allOf:
                          - type: object
                            properties:
                              id:
                                type: integer
                                description: Уникальный идентификатор группы
                                example: 1
                              name:
                                type: string
                                description: Название группы
                                example: IT Department
                              comment:
                                type: string
                                description: Описание группы
                                example: Разработка и поддержка IT систем
                              hierarchyPathString:
                                type: string
                                description: Полный иерархический путь группы
                                example: Company / IT Department / Development Team
                              userCount:
                                type: integer
                                description: Количество пользователей в группе
                                example: 25
                              type:
                                type: integer
                                description: Тип группы (1=гостевая, 2=авторизованных, 9=по умолчанию)
                                example: 2
                              parent_id:
                                oneOf:
                                  - type: integer
                                    minimum: 1
                                  - type: 'null'
                                description: ID родительской группы
                                example: null
                              image:
                                oneOf:
                                  - type: string
                                    format: uri
                                  - type: 'null'
                                description: URL изображения группы
                                example: https://s3.reezonly.com/groups/it-dept.jpg
                              created_at:
                                type: string
                                format: date-time
                                description: Дата создания
                                example: '2023-08-25T14:15:43Z'
                              updated_at:
                                type: string
                                format: date-time
                                description: Дата обновления
                                example: '2023-08-25T14:15:43Z'
                          - type: object
                            properties:
                              users:
                                type: array
                                description: Список пользователей группы
                                items:
                                  allOf:
                                    - type: object
                                      properties:
                                        id:
                                          type: integer
                                          example: 137
                                        email:
                                          type: string
                                          format: email
                                          example: user@example.com
                                        name:
                                          type: string
                                          example: Иван Иванов
                                        role:
                                          type: string
                                          enum:
                                            - admin
                                            - editor
                                            - curator
                                            - student
                                          x-enumDescriptions:
                                            admin: Администратор (полный доступ)
                                            editor: Контент-редактор
                                            curator: Куратор/методист
                                            student: Ученик/слушатель
                                          example: student
                                        status:
                                          type: string
                                          enum:
                                            - active
                                            - inactive
                                            - blocked
                                          x-enumDescriptions:
                                            active: Активный пользователь
                                            inactive: Неактивный (архив/черновик)
                                            blocked: Заблокирован (без доступа)
                                          example: active
                                        created_at:
                                          type: string
                                          format: date-time
                                          example: '2024-01-15T10:30:00Z'
                                        updated_at:
                                          type: string
                                          format: date-time
                                          example: '2024-01-15T10:30:00Z'
                                    - type: object
                                      properties:
                                        role_in_group:
                                          type: string
                                          description: Роль пользователя в группе
                                        joined_at:
                                          type: string
                                          format: date-time
                                          description: Дата добавления в группу
                              children:
                                type: array
                                description: Дочерние группы
                                items:
                                  allOf:
                                    - type: object
                                      properties:
                                        id:
                                          type: integer
                                          description: Уникальный идентификатор группы
                                          example: 1
                                        name:
                                          type: string
                                          description: Название группы
                                          example: IT Department
                                        comment:
                                          type: string
                                          description: Описание группы
                                          example: Разработка и поддержка IT систем
                                        hierarchyPathString:
                                          type: string
                                          description: Полный иерархический путь группы
                                          example: Company / IT Department / Development Team
                                        userCount:
                                          type: integer
                                          description: Количество пользователей в группе
                                          example: 25
                                        type:
                                          type: integer
                                          description: Тип группы (1=гостевая, 2=авторизованных, 9=по умолчанию)
                                          example: 2
                                        parent_id:
                                          oneOf:
                                            - type: integer
                                              minimum: 1
                                            - type: 'null'
                                          description: ID родительской группы
                                          example: null
                                        image:
                                          oneOf:
                                            - type: string
                                              format: uri
                                            - type: 'null'
                                          description: URL изображения группы
                                          example: https://s3.reezonly.com/groups/it-dept.jpg
                                        created_at:
                                          type: string
                                          format: date-time
                                          description: Дата создания
                                          example: '2023-08-25T14:15:43Z'
                                        updated_at:
                                          type: string
                                          format: date-time
                                          description: Дата обновления
                                          example: '2023-08-25T14:15:43Z'
                                    - type: object
                                      properties:
                                        parent:
                                          type: object
                                          description: Информация о родительской группе
                                          properties:
                                            id:
                                              type: integer
                                            name:
                                              type: string
                                          nullable: true
                              rules:
                                type: array
                                description: Правила доступа группы
                                items:
                                  type: object
                                  properties:
                                    type:
                                      type: integer
                                    objectId:
                                      type: integer
                                    objectType:
                                      type: string
              examples:
                group_detail:
                  summary: Детальная информация о группе
                  value:
                    success: true
                    data:
                      id: 1
                      name: IT Department
                      comment: Разработка и поддержка IT систем
                      hierarchyPathString: IT Department
                      userCount: 25
                      type: 2
                      image: https://s3.reezonly.com/groups/it-dept.jpg
                      parent_id: null
                      created_at: '2023-08-25T14:15:43Z'
                      updated_at: '2023-08-25T14:15:43Z'
                      users:
                        - id: 101
                          username: john.doe
                          email: john.doe@company.com
                          role: admin
                          created_at: '2023-08-25T14:20:00Z'
                        - id: 102
                          username: jane.smith
                          email: jane.smith@company.com
                          role: editor
                          created_at: '2023-08-25T14:25:00Z'
                      children:
                        - id: 2
                          name: Development Team
                          userCount: 15
                          hierarchyPathString: IT Department / Development Team
                      rules: []
        '404':
          description: Группа не найдена
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              examples:
                group_not_found:
                  summary: Группа не найдена
                  value:
                    success: false
                    errors:
                      id:
                        - Group not found
  /group/group/create:
    post:
      tags:
        - Groups.Structure
      summary: Создать новую группу
      description: |
        Создает новую группу пользователей с поддержкой иерархии.
        Автоматически валидирует структуру иерархии, предотвращая циклические зависимости.
        Поддерживает загрузку изображения группы и опциональное добавление пользователей.

        **Бизнес-логика:**
        - Проверка уникальности названия в рамках родительской группы
        - Валидация иерархии (предотвращение циклов)
        - Автоматическое построение иерархического пути
        - Загрузка изображения в S3 хранилище
        - Логирование действия в ActionLog
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
                  minLength: 2
                  maxLength: 255
                  description: Название группы (обязательное поле)
                  example: Marketing Department
                comment:
                  type: string
                  maxLength: 512
                  description: Описание группы (опционально)
                  example: Отдел маркетинга и продвижения
                parent_id:
                  oneOf:
                    - type: integer
                      minimum: 1
                    - type: 'null'
                  description: |
                    ID родительской группы:
                    - `null` для корневой группы
                    - ID существующей группы для дочерней
                  example: null
                user_ids:
                  type: array
                  items:
                    type: integer
                    minimum: 1
                  maxItems: 100
                  description: Массив ID пользователей для добавления в группу (максимум 100)
                  example:
                    - 101
                    - 102
                    - 103
                image_upload:
                  type: string
                  format: binary
                  description: Файл изображения группы (через multipart/form-data)
            examples:
              root_group:
                summary: Создание корневой группы
                value:
                  name: Marketing Department
                  comment: Маркетинг и продвижение продуктов
                  parent_id: null
                  user_ids:
                    - 101
                    - 102
                    - 103
              child_group:
                summary: Создание дочерней группы
                value:
                  name: Content Marketing
                  comment: Создание контента и SEO
                  parent_id: 5
                  user_ids:
                    - 201
                    - 202
      responses:
        '201':
          description: Группа успешно создана
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          id:
                            type: integer
                            description: Уникальный идентификатор группы
                            example: 1
                          name:
                            type: string
                            description: Название группы
                            example: IT Department
                          comment:
                            type: string
                            description: Описание группы
                            example: Разработка и поддержка IT систем
                          hierarchyPathString:
                            type: string
                            description: Полный иерархический путь группы
                            example: Company / IT Department / Development Team
                          userCount:
                            type: integer
                            description: Количество пользователей в группе
                            example: 25
                          type:
                            type: integer
                            description: Тип группы (1=гостевая, 2=авторизованных, 9=по умолчанию)
                            example: 2
                          parent_id:
                            oneOf:
                              - type: integer
                                minimum: 1
                              - type: 'null'
                            description: ID родительской группы
                            example: null
                          image:
                            oneOf:
                              - type: string
                                format: uri
                              - type: 'null'
                            description: URL изображения группы
                            example: https://s3.reezonly.com/groups/it-dept.jpg
                          created_at:
                            type: string
                            format: date-time
                            description: Дата создания
                            example: '2023-08-25T14:15:43Z'
                          updated_at:
                            type: string
                            format: date-time
                            description: Дата обновления
                            example: '2023-08-25T14:15:43Z'
              examples:
                group_created:
                  summary: Группа создана
                  value:
                    success: true
                    data:
                      id: 15
                      name: Marketing Department
                      comment: Маркетинг и продвижение продуктов
                      hierarchyPathString: Marketing Department
                      userCount: 3
                      type: 2
                      parent_id: null
                      image: null
                      created_at: '2023-11-19T10:30:00Z'
                      updated_at: '2023-11-19T10:30:00Z'
        '400':
          description: Ошибка валидации
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              examples:
                validation_error:
                  summary: Ошибка валидации
                  value:
                    success: false
                    errors:
                      name:
                        - Group name is required
                      parent_id:
                        - Parent group not found
        '403':
          description: Недостаточно прав
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
  /group/group/update:
    put:
      tags:
        - Groups.Structure
      summary: Обновить информацию о группе
      description: |
        Обновляет базовую информацию о группе: название, описание, родительскую группу.
        При изменении parent_id автоматически перестраивается иерархический путь
        для всех дочерних групп.

        **Важно:** Изменение родительской группы затрагивает всю ветку дочерних групп.
      parameters:
        - name: id
          in: query
          required: true
          schema:
            type: integer
            minimum: 1
          description: ID группы для обновления
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  minLength: 2
                  maxLength: 255
                  description: Новое название группы
                comment:
                  type: string
                  maxLength: 512
                  description: Новое описание группы
                parent_id:
                  oneOf:
                    - type: integer
                      minimum: 1
                    - type: 'null'
                  description: |
                    Новый родитель группы:
                    - `null` - сделать корневой группой
                    - `int` - переместить в другого родителя
                    - отсутствие поля - оставить текущего родителя
              example:
                name: Updated Marketing Department
                comment: Обновленный комментарий отдела маркетинга
                parent_id: 3
      responses:
        '200':
          description: Группа успешно обновлена
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          id:
                            type: integer
                            description: Уникальный идентификатор группы
                            example: 1
                          name:
                            type: string
                            description: Название группы
                            example: IT Department
                          comment:
                            type: string
                            description: Описание группы
                            example: Разработка и поддержка IT систем
                          hierarchyPathString:
                            type: string
                            description: Полный иерархический путь группы
                            example: Company / IT Department / Development Team
                          userCount:
                            type: integer
                            description: Количество пользователей в группе
                            example: 25
                          type:
                            type: integer
                            description: Тип группы (1=гостевая, 2=авторизованных, 9=по умолчанию)
                            example: 2
                          parent_id:
                            oneOf:
                              - type: integer
                                minimum: 1
                              - type: 'null'
                            description: ID родительской группы
                            example: null
                          image:
                            oneOf:
                              - type: string
                                format: uri
                              - type: 'null'
                            description: URL изображения группы
                            example: https://s3.reezonly.com/groups/it-dept.jpg
                          created_at:
                            type: string
                            format: date-time
                            description: Дата создания
                            example: '2023-08-25T14:15:43Z'
                          updated_at:
                            type: string
                            format: date-time
                            description: Дата обновления
                            example: '2023-08-25T14:15:43Z'
        '400':
          description: Ошибка валидации
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              examples:
                hierarchy_error:
                  summary: Ошибка иерархии
                  value:
                    success: false
                    errors:
                      parent_id:
                        - Cannot move group to its own child
        '404':
          description: Группа не найдена
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
  /group/group/delete:
    delete:
      tags:
        - Groups.Structure
      summary: Удалить группу
      description: |
        Удаляет группу и все связанные данные:
        - Связи пользователей с группой
        - Правила доступа группы
        - Логирование действия

        **Важно:** Нельзя удалить группу, у которой есть дочерние группы.
        Сначала нужно удалить или переместить все дочерние группы.
      parameters:
        - name: id
          in: query
          required: true
          schema:
            type: integer
            minimum: 1
          description: ID группы для удаления
      responses:
        '200':
          description: Группа успешно удалена
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    description: Данные ответа
                  meta:
                    type: object
                    properties:
                      total:
                        type: integer
                        description: Общее количество элементов
                        example: 150
                      page:
                        type: integer
                        description: Текущая страница
                        example: 1
                      per-page:
                        type: integer
                        description: Элементов на странице
                        example: 20
              examples:
                success:
                  value:
                    success: true
                    message: Group deleted successfully
        '400':
          description: Нельзя удалить группу
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              examples:
                has_children:
                  summary: Есть дочерние группы
                  value:
                    success: false
                    errors:
                      id:
                        - Cannot delete group with child groups
        '404':
          description: Группа не найдена
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
  /group/group/multiple-delete:
    delete:
      tags:
        - Groups.Structure
      summary: Массовое удаление групп
      description: |
        Удаляет несколько групп за один запрос. Каждая группа проверяется
        на отсутствие дочерних групп перед удалением.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - groupIds
              properties:
                groupIds:
                  type: array
                  items:
                    type: integer
                    minimum: 1
                  maxItems: 50
                  description: Массив ID групп для удаления (максимум 50)
              example:
                groupIds:
                  - 10
                  - 11
                  - 12
      responses:
        '200':
          description: Результат массового удаления
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          deleted:
                            type: array
                            items:
                              type: integer
                            description: ID успешно удаленных групп
                          errors:
                            type: array
                            items:
                              type: object
                              properties:
                                id:
                                  type: integer
                                error:
                                  type: string
                            description: Ошибки удаления
  /dictionary/user/groups:
    get:
      tags:
        - Groups.Structure
      summary: Получить иерархию всех групп
      description: |
        Возвращает полный список групп с иерархической структурой для выпадающих списков
        и древовидных компонентов интерфейса.
      parameters:
        - name: show_default
          in: query
          schema:
            type: boolean
            default: false
          description: Показать группы по умолчанию (гостевые, авторизованные)
      responses:
        '200':
          description: Иерархический список групп
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: integer
                              description: ID группы
                            name:
                              type: string
                              description: Название группы
                            parent_id:
                              oneOf:
                                - type: integer
                                - type: 'null'
                              description: ID родительской группы
                            level:
                              type: integer
                              description: Уровень вложенности (0=корневой)
                              example: 0
                            has_children:
                              type: boolean
                              description: Наличие дочерних групп
                              example: true
                            userCount:
                              type: integer
                              description: Количество пользователей
                              example: 15
  /group/group/user-add:
    post:
      tags:
        - Groups.Members
      summary: Добавить пользователей в группы
      description: |
        Добавляет пользователей в одну или несколько групп.
        Поддерживает пакетную обработку до 100 пользователей.
        Проверяет дубликаты и автоматически пропускает уже добавленных пользователей.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              oneOf:
                - type: object
                  description: Операция с одной группой
                  required:
                    - id
                    - userIds
                  properties:
                    id:
                      type: integer
                      minimum: 1
                      description: ID группы
                    userIds:
                      type: array
                      items:
                        type: integer
                        minimum: 1
                      maxItems: 100
                      description: Массив ID пользователей (максимум 100)
                - type: object
                  description: Операция с несколькими группами
                  required:
                    - userIds
                    - groupIds
                  properties:
                    userIds:
                      type: array
                      items:
                        type: integer
                        minimum: 1
                      maxItems: 100
                      description: Массив ID пользователей (максимум 100)
                    groupIds:
                      type: array
                      items:
                        type: integer
                        minimum: 1
                      maxItems: 10
                      description: Массив ID групп (максимум 10)
            examples:
              single_group:
                summary: Добавление в одну группу
                value:
                  id: 5
                  userIds:
                    - 101
                    - 102
                    - 103
                    - 104
                    - 105
              multiple_groups:
                summary: Добавление в несколько групп
                value:
                  userIds:
                    - 201
                    - 202
                    - 203
                  groupIds:
                    - 10
                    - 11
                    - 12
      responses:
        '200':
          description: Пользователи успешно добавлены
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          added_count:
                            type: integer
                            description: Количество добавленных пользователей
                          skipped_count:
                            type: integer
                            description: Количество пропущенных (уже были в группах)
        '400':
          description: Ошибка валидации
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              examples:
                limit_exceeded:
                  summary: Превышен лимит
                  value:
                    success: false
                    errors:
                      userIds:
                        - Maximum 100 users per request
  /group/group/user-delete:
    post:
      tags:
        - Groups.Members
      summary: Удалить пользователей из групп
      description: |
        Удаляет пользователей из указанных групп.
        Автоматически обрабатывает ситуации, когда пользователя нет в группе.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              oneOf:
                - type: object
                  description: Операция с одной группой
                  required:
                    - id
                    - userIds
                  properties:
                    id:
                      type: integer
                      minimum: 1
                      description: ID группы
                    userIds:
                      type: array
                      items:
                        type: integer
                        minimum: 1
                      maxItems: 100
                      description: Массив ID пользователей (максимум 100)
                - type: object
                  description: Операция с несколькими группами
                  required:
                    - userIds
                    - groupIds
                  properties:
                    userIds:
                      type: array
                      items:
                        type: integer
                        minimum: 1
                      maxItems: 100
                      description: Массив ID пользователей (максимум 100)
                    groupIds:
                      type: array
                      items:
                        type: integer
                        minimum: 1
                      maxItems: 10
                      description: Массив ID групп (максимум 10)
      responses:
        '200':
          description: Пользователи успешно удалены
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          removed_count:
                            type: integer
                            description: Количество удаленных пользователей
  /group/group/export:
    post:
      tags:
        - Groups.Structure
      summary: Запустить экспорт структуры групп
      description: |
        Создаёт задачу экспорта групп по указанным фильтрам. Возвращает идентификатор экспорта и ссылку для скачивания после формирования.

        **Назначение:** выгрузка дерева групп для сверки с внешней HR/CRM и последующего импорта/миграции.

        **Пример Use case:** HR переносит сотрудников между группами, обновляет курсы через `assign-courses`, а затем скачивает актуальный экспорт структуры, чтобы сверить дерево отделов с HRM.
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
              description: Фильтры экспорта (аналог фильтров списка групп).
      responses:
        '200':
          description: Экспорт поставлен в очередь
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          export_id:
                            type: integer
                            example: 102
                          download_url:
                            type: string
                            format: uri
                            example: https://space.example.com/export/102.xlsx
        '500':
          description: Внутренняя ошибка сервера
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  server:
                    - Internal server error. Try again later
  /group/group/export-download:
    get:
      tags:
        - Groups.Structure
      summary: Скачать сформированный экспорт групп
      parameters:
        - name: id
          in: query
          required: true
          schema:
            type: integer
            minimum: 1
          description: ID задания экспорта
      responses:
        '200':
          description: Экспорт готов
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
        '404':
          description: Ресурс не найден
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  id:
                    - Ресурс не найден
  /group/group/assign-courses:
    post:
      tags:
        - Groups.Members
      summary: Назначить курсы всем участникам группы
      description: |
        Назначает указанные курсы всем текущим участникам группы.
        Операция выполняется асинхронно через очередь для больших групп.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - groupIds
                - courseIds
              properties:
                groupIds:
                  type: array
                  items:
                    type: integer
                    minimum: 1
                  maxItems: 10
                  description: Массив ID групп (максимум 10)
                courseIds:
                  type: array
                  items:
                    type: integer
                    minimum: 1
                  maxItems: 50
                  description: Массив ID курсов для назначения (максимум 50)
              example:
                groupIds:
                  - 5
                  - 6
                  - 7
                courseIds:
                  - 101
                  - 102
                  - 103
      responses:
        '200':
          description: Курсы успешно назначены
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          job_id:
                            type: string
                            description: ID фонового задания для отслеживания
                          assigned_users:
                            type: integer
                            description: Количество пользователей, которым назначены курсы
  /certificate/template/index:
    get:
      tags:
        - Certificates.Templates
      summary: Получить список шаблонов сертификатов
      description: Возвращает все доступные шаблоны для генерации сертификатов
      parameters:
        - in: query
          name: page
          description: Номер страницы для пагинации
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
            example: 1
        - in: query
          name: per-page
          description: Количество элементов на странице (максимум 100)
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
            example: 50
        - name: active_only
          in: query
          required: false
          schema:
            type: boolean
            default: true
          description: Показать только активные шаблоны
      responses:
        '200':
          description: List of certificate templates
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: integer
                            name:
                              type: string
                            description:
                              type: string
                            preview_url:
                              type: string
                            active:
                              type: boolean
                            created_at:
                              type: string
                            updated_at:
                              type: string
  /certificate/template/view:
    get:
      tags:
        - Certificates.Templates
      summary: Получить детальную информацию о шаблоне сертификата
      description: Возвращает полную информацию о шаблоне включая переменные и предпросмотр
      parameters:
        - in: query
          name: id
          description: Идентификатор ресурса
          required: true
          schema:
            type: integer
            minimum: 1
            example: 42
      responses:
        '200':
          description: Certificate template details
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          id:
                            type: integer
                          name:
                            type: string
                          description:
                            type: string
                          template_html:
                            type: string
                          variables:
                            type: array
                            items:
                              type: object
                              properties:
                                name:
                                  type: string
                                type:
                                  type: string
                                description:
                                  type: string
                                required:
                                  type: boolean
                          preview_url:
                            type: string
                          active:
                            type: boolean
        '404':
          description: Template not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  id:
                    - Ресурс не найден
  /certificate/certificate/index:
    get:
      tags:
        - Certificates.Issued
      summary: Получить список выданных сертификатов
      description: Возвращает список выданных сертификатов с фильтрацией
      parameters:
        - in: query
          name: page
          description: Номер страницы для пагинации
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
            example: 1
        - in: query
          name: per-page
          description: Количество элементов на странице (максимум 100)
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
            example: 50
        - name: user_id
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
          description: Фильтр по ID пользователя
        - name: course_id
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
          description: Фильтр по ID курса
        - name: status
          in: query
          required: false
          schema:
            type: string
            enum:
              - issued
              - revoked
              - expired
          description: Фильтр по статусу сертификата
        - name: date_from
          in: query
          required: false
          schema:
            type: string
            format: date
          description: Дата выдачи от
        - name: date_to
          in: query
          required: false
          schema:
            type: string
            format: date
          description: Дата выдачи до
      responses:
        '200':
          description: List of issued certificates
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: integer
                              example: 1
                            title:
                              type: string
                              example: Сертификат о прохождении курса
                            description:
                              type: string
                              example: Выдан за успешное завершение курса
                            issued_at:
                              type: string
                              format: date-time
                              example: '2024-01-15T10:30:00Z'
                            status:
                              type: string
                              enum:
                                - issued
                                - revoked
                                - expired
                              x-enumDescriptions:
                                issued: Сертификат выдан
                                revoked: Сертификат отозван
                                expired: Срок действия истёк
                              example: issued
  /certificate/certificate/view:
    get:
      tags:
        - Certificates.Issued
      summary: Получить информацию о выданном сертификате
      description: Возвращает детальную информацию о конкретном выданном сертификате
      parameters:
        - in: query
          name: id
          description: Идентификатор ресурса
          required: true
          schema:
            type: integer
            minimum: 1
            example: 42
      responses:
        '200':
          description: Certificate details
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        allOf:
                          - type: object
                            properties:
                              id:
                                type: integer
                                example: 1
                              title:
                                type: string
                                example: Сертификат о прохождении курса
                              description:
                                type: string
                                example: Выдан за успешное завершение курса
                              issued_at:
                                type: string
                                format: date-time
                                example: '2024-01-15T10:30:00Z'
                              status:
                                type: string
                                enum:
                                  - issued
                                  - revoked
                                  - expired
                                x-enumDescriptions:
                                  issued: Сертификат выдан
                                  revoked: Сертификат отозван
                                  expired: Срок действия истёк
                                example: issued
                          - type: object
                            properties:
                              template_id:
                                type: integer
                              user:
                                type: object
                                properties:
                                  id:
                                    type: integer
                                    example: 137
                                  email:
                                    type: string
                                    format: email
                                    example: user@example.com
                                  name:
                                    type: string
                                    example: Иван Иванов
                                  role:
                                    type: string
                                    enum:
                                      - admin
                                      - editor
                                      - curator
                                      - student
                                    x-enumDescriptions:
                                      admin: Администратор (полный доступ)
                                      editor: Контент-редактор
                                      curator: Куратор/методист
                                      student: Ученик/слушатель
                                    example: student
                                  status:
                                    type: string
                                    enum:
                                      - active
                                      - inactive
                                      - blocked
                                    x-enumDescriptions:
                                      active: Активный пользователь
                                      inactive: Неактивный (архив/черновик)
                                      blocked: Заблокирован (без доступа)
                                    example: active
                                  created_at:
                                    type: string
                                    format: date-time
                                    example: '2024-01-15T10:30:00Z'
                                  updated_at:
                                    type: string
                                    format: date-time
                                    example: '2024-01-15T10:30:00Z'
                              course:
                                type: object
                                properties:
                                  id:
                                    type: integer
                                  name:
                                    type: string
                              pdf_url:
                                type: string
                                format: uri
                              verification_url:
                                type: string
                                format: uri
                              expires_at:
                                type: string
                                format: date-time
        '404':
          description: Certificate not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  id:
                    - Ресурс не найден
  /certificate/certificate/download:
    get:
      tags:
        - Certificates.Issued
      summary: Скачать PDF сертификата
      description: Возвращает PDF файл сертификата для скачивания
      parameters:
        - in: query
          name: id
          description: Идентификатор ресурса
          required: true
          schema:
            type: integer
            minimum: 1
            example: 42
      responses:
        '200':
          description: PDF certificate file
          content:
            application/pdf:
              schema:
                type: string
                format: binary
        '404':
          description: Certificate not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  id:
                    - Ресурс не найден
  /certificate/certificate/create:
    post:
      tags:
        - Certificates.Issued
      summary: Выдать сертификат пользователю за прохождение курса
      description: |
        Создает выдачу сертификата на основе выбранного шаблона и пары пользователь/курс.

        **Валидация:**
        - Обязательны `template_id`, `user_id`, `course_id`
        - Проверяется отсутствие уже выданного сертификата для пары
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - template_id
                - user_id
                - course_id
              properties:
                template_id:
                  type: integer
                  minimum: 1
                user_id:
                  type: integer
                  minimum: 1
                course_id:
                  type: integer
                  minimum: 1
                variables:
                  type: object
                  description: Значения переменных шаблона
      responses:
        '201':
          description: Сертификат выдан
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 1
                          title:
                            type: string
                            example: Сертификат о прохождении курса
                          description:
                            type: string
                            example: Выдан за успешное завершение курса
                          issued_at:
                            type: string
                            format: date-time
                            example: '2024-01-15T10:30:00Z'
                          status:
                            type: string
                            enum:
                              - issued
                              - revoked
                              - expired
                            x-enumDescriptions:
                              issued: Сертификат выдан
                              revoked: Сертификат отозван
                              expired: Срок действия истёк
                            example: issued
        '400':
          description: Ошибка в запросе (неверные параметры)
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  email:
                    - Некорректный email
                  page:
                    - page must be >= 1
  /certificate/download-zip:
    post:
      tags:
        - Certificates.Issued
      summary: Сформировать ZIP с сертификатами
      description: |
        Запускает генерацию ZIP-архива сертификатов по фильтрам (search, course_id, user_id, пагинация, сортировка). Одновременно может быть только одна активная задача на ключ.

        **Назначение:** массовая выгрузка сертификатов для передачи внешним системам или печати.

        **Пример Use case:** администратор выбирает курс и диапазон пользователей, запускает экспорт и получает ссылку на архив.
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                search:
                  type: string
                course_id:
                  type: integer
                  minimum: 1
                user_id:
                  type: integer
                  minimum: 1
                page:
                  type: integer
                  minimum: 1
                  default: 1
                per-page:
                  type: integer
                  minimum: 1
                  maximum: 500
                  default: 50
                sort:
                  type: string
                  example: '-created_at'
      responses:
        '200':
          description: Задача запущена
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          filePath:
                            type: string
                            format: uri
                            example: /uploads/certificates/zip/abc.zip
        '400':
          description: Ошибка в запросе (неверные параметры)
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  email:
                    - Некорректный email
                  page:
                    - page must be >= 1
  /certificate/course/index:
    get:
      tags:
        - Certificates.Lookups
      summary: Список курсов для выдачи сертификатов
      description: Возвращает курсы (id, title, type) для выбора `course_id` при выдаче сертификатов.
      parameters:
        - in: query
          name: page
          description: Номер страницы для пагинации
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
            example: 1
        - in: query
          name: per-page
          description: Количество элементов на странице (максимум 100)
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
            example: 50
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: integer
                            title:
                              type: string
                            type:
                              type: string
  /certificate/user/index:
    get:
      tags:
        - Certificates.Lookups
      summary: Список пользователей для выдачи сертификатов
      description: Возвращает пользователей (id, username, email) для выбора `user_id` при выдаче сертификатов.
      parameters:
        - in: query
          name: page
          description: Номер страницы для пагинации
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
            example: 1
        - in: query
          name: per-page
          description: Количество элементов на странице (максимум 100)
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
            example: 50
        - name: search
          in: query
          schema:
            type: string
          description: Поиск по имени/email
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: integer
                            username:
                              type: string
                            email:
                              type: string
  /certificate/type/index:
    get:
      tags:
        - Certificates.Lookups
      summary: Справочник типов сертификатов
      description: Возвращает список типов сертификатов для подстановки в запросах выдачи.
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: integer
                              example: 1
                            name:
                              type: string
                              example: Course completion
                            description:
                              type: string
                              nullable: true
  /certificate/variable/index:
    get:
      tags:
        - Certificates.Lookups
      summary: Список переменных сертификатов
      description: Возвращает доступные переменные для шаблонов сертификатов (ключ, имя, обязательность).
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: integer
                              example: 5
                            key:
                              type: string
                              example: username
                            name:
                              type: string
                              example: Имя пользователя
                            description:
                              type: string
                              nullable: true
                            required:
                              type: boolean
  /certificate/variable-list/index:
    get:
      tags:
        - Certificates.Lookups
      summary: Наборы переменных сертификатов
      description: Возвращает значения переменных (variable_id, key, value) для подстановки в шаблоны.
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            variable_id:
                              type: integer
                            key:
                              type: string
                            value:
                              type: string
  /course/course/index:
    get:
      tags:
        - Courses
      summary: Получить каталог курсов
      description: Возвращает список доступных курсов с базовой информацией (только чтение)
      parameters:
        - in: query
          name: page
          description: Номер страницы для пагинации
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
            example: 1
        - in: query
          name: per-page
          description: Количество элементов на странице (максимум 100)
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
            example: 50
        - name: category_id
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
          description: Фильтр по ID категории курсов
        - name: status
          in: query
          required: false
          schema:
            type: string
            enum:
              - active
              - inactive
              - archived
            default: active
          description: Фильтр по статусу курса
        - name: featured
          in: query
          required: false
          schema:
            type: boolean
            default: false
          description: Показать только рекомендуемые курсы
      responses:
        '200':
          description: List of courses
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: integer
                            title:
                              type: string
                            description:
                              type: string
                            status:
                              type: string
                            price:
                              type: number
                            duration:
                              type: string
                            category:
                              type: object
                              properties:
                                id:
                                  type: integer
                                name:
                                  type: string
                            thumbnail_url:
                              type: string
                            lms_id:
                              type: integer
                              description: ID курса в LMS системе
                            student_count:
                              type: integer
  /course/course/view:
    get:
      tags:
        - Courses
      summary: Получить детальную информацию о курсе
      description: Возвращает полную информацию о курсе включая программу обучения (только чтение)
      parameters:
        - in: query
          name: id
          description: Идентификатор ресурса
          required: true
          schema:
            type: integer
            minimum: 1
            example: 42
      responses:
        '200':
          description: Course details
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          id:
                            type: integer
                          title:
                            type: string
                          description:
                            type: string
                          status:
                            type: string
                          price:
                            type: number
                          duration:
                            type: string
                          level:
                            type: string
                            enum:
                              - beginner
                              - intermediate
                              - advanced
                          category:
                            type: object
                            properties:
                              id:
                                type: integer
                              name:
                                type: string
                          instructor:
                            type: object
                            properties:
                              id:
                                type: integer
                              name:
                                type: string
                              avatar_url:
                                type: string
                          thumbnail_url:
                            type: string
                          lms_id:
                            type: integer
                            description: ID курса в LMS системе
                          syllabus:
                            type: array
                            description: Программа курса
                            items:
                              type: object
                              properties:
                                id:
                                  type: integer
                                title:
                                  type: string
                                description:
                                  type: string
                                duration:
                                  type: string
                                order:
                                  type: integer
                          requirements:
                            type: array
                            items:
                              type: string
                          outcomes:
                            type: array
                            items:
                              type: string
                          student_count:
                            type: integer
                          rating:
                            type: number
                          reviews_count:
                            type: integer
                          created_at:
                            type: string
                          updated_at:
                            type: string
        '404':
          description: Course not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  id:
                    - Ресурс не найден
  /dictionary/dictionary/page-types:
    get:
      tags:
        - Pages
      summary: Получить список типов страниц
      description: |
        Справочник типов страниц сайта и продуктов (read-only): landing, blog, help, legal и другие.

        **Назначение:** дать фронтам и внешним CMS нормализованные типы для фильтров и группировки страниц/лендингов.

        **Ключевые особенности:** стабильные коды типов, совместимость с `/dictionary/dictionary/pages`, можно кешировать на клиенте.

        **Пример Use case:** SPA-витрина запрашивает типы, строит фильтры и подсветку меню по категориям страниц.
      responses:
        '200':
          description: Page types list
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          items:
                            type: array
                            items:
                              type: object
                              properties:
                                id:
                                  type: integer
                                  example: 3
                                name:
                                  type: string
                                  example: product-page
        '400':
          description: Ошибка в запросе (неверные параметры)
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  email:
                    - Некорректный email
                  page:
                    - page must be >= 1
  /dictionary/dictionary/pages:
    get:
      tags:
        - Pages
      summary: Получить справочник страниц
      description: |
        Доступные страницы сайта (лендинги, продуктовые страницы) с базовыми метаданными (read-only): `title`, `alias`, `type`, `enabled`, SEO-атрибуты.

        **Назначение:** раскрыть структуру публичных и закрытых страниц, чтобы внешние CMS могли собирать меню и лендинги без доступа в админку.

        **Ключевые особенности:** фильтрация по типу (используйте `/dictionary/dictionary/page-types`), статус `enabled`, поля `alias` и `category` для навигации.

        **Пример Use case:** внешняя система заимствует SPA-меню, вызывает `/dictionary/dictionary/pages`, сортирует по типу и обновляет ссылки на новом сайте без внутреннего CMS.
      responses:
        '200':
          description: Pages list
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          items:
                            type: array
                            items:
                              type: object
                              properties:
                                id:
                                  type: integer
                                  example: 12
                                alias:
                                  type: string
                                  example: product-page-42
                                title:
                                  type: string
                                  example: Курс "Data Science"
                                description:
                                  type: string
                                  example: Лендинг продукта Data Science
                                enabled:
                                  type: boolean
                                  example: true
                                type:
                                  type: string
                                  description: Тип страницы (используйте справочник page-types)
                                  example: course-and-training-promo-page
        '400':
          description: Ошибка в запросе (неверные параметры)
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  email:
                    - Некорректный email
                  page:
                    - page must be >= 1
  /integration/report/consolidated:
    post:
      tags:
        - Integration Reports
      summary: Сводный отчёт (JSON)
      description: |
        JSON-эквивалент XLSX «Сводный» отчёта с фильтрами по продуктам, группам, прогрессу и полям профиля.

        **Назначение:** отдать тот же набор колонок, что в XLSX «Сводный», но в JSON для BI/дашбордов без генерации файлов.

        **Пример Use case:** BI-интеграция запрашивает данные по конкретным продуктам и отделам, строит графики прогресса и статусов оплат без скачивания XLSX.
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                product:
                  type: array
                  items:
                    type: integer
                group:
                  type: array
                  items:
                    type: integer
                user_ids:
                  type: array
                  items:
                    type: integer
                progress_from:
                  type: integer
                  minimum: 0
                  maximum: 100
                  default: 0
                progress_to:
                  type: integer
                  minimum: 0
                  maximum: 100
                  default: 100
                fields:
                  type: object
                  additionalProperties:
                    type: array
                    items:
                      type: string
                  description: Фильтры по полям профиля (username, email, phone, department, position)
                page:
                  type: integer
                  minimum: 1
                  default: 1
                per-page:
                  type: integer
                  minimum: 1
                  maximum: 1000
                  default: 200
                sort:
                  type: string
                  enum:
                    - '-date_added'
                    - date_added
                    - '-progress'
                    - progress
                  default: '-date_added'
      responses:
        '200':
          description: Отчёт сформирован
          content:
            application/json:
              schema:
                allOf:
                  - type: object
                    properties:
                      success:
                        type: boolean
                        example: true
                      data:
                        type: object
                        description: Данные ответа
                      meta:
                        type: object
                        properties:
                          total:
                            type: integer
                            description: Общее количество элементов
                            example: 150
                          page:
                            type: integer
                            description: Текущая страница
                            example: 1
                          per-page:
                            type: integer
                            description: Элементов на странице
                            example: 20
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          filters:
                            type: object
                          items:
                            type: array
                            items:
                              type: object
                              properties:
                                product:
                                  type: object
                                  properties:
                                    id:
                                      type: integer
                                      example: 59
                                    title:
                                      type: string
                                      example: Цифровые коммуникации
                                status:
                                  type: object
                                  properties:
                                    code:
                                      type: integer
                                      example: 4
                                    name:
                                      type: string
                                      example: Оплачен
                                amount:
                                  type: number
                                  example: 60000
                                date_added_at:
                                  type: object
                                  properties:
                                    unix:
                                      type: integer
                                      nullable: true
                                      example: 1730399460
                                    iso:
                                      type: string
                                      nullable: true
                                      example: '2024-10-31T13:11:00+03:00'
                                last_activity_at:
                                  type: object
                                  properties:
                                    unix:
                                      type: integer
                                      nullable: true
                                      example: 1730399460
                                    iso:
                                      type: string
                                      nullable: true
                                      example: '2024-10-31T13:11:00+03:00'
                                registered_at:
                                  type: object
                                  properties:
                                    unix:
                                      type: integer
                                      nullable: true
                                      example: 1730399460
                                    iso:
                                      type: string
                                      nullable: true
                                      example: '2024-10-31T13:11:00+03:00'
                                progress_percent:
                                  type: integer
                                  minimum: 0
                                  maximum: 100
                                user:
                                  type: object
                                  properties:
                                    id:
                                      type: integer
                                    name:
                                      type: string
                                    email:
                                      type: string
                                      format: email
                                    phone:
                                      type: string
                                    department:
                                      type: string
                                    position:
                                      type: string
                          pagination:
                            type: object
                            properties:
                              page:
                                type: integer
                                example: 1
                              per_page:
                                type: integer
                                example: 200
                              total:
                                type: integer
                                example: 8
                              total_pages:
                                type: integer
                                example: 1
              examples:
                sample:
                  summary: Пример успешного ответа
                  value:
                    success: true
                    data:
                      filters:
                        product:
                          - 59
                          - 62
                        progress_from: 50
                        progress_to: 85
                        fields:
                          email:
                            - ya.ru
                      items:
                        - product:
                            id: 59
                            title: Цифровые коммуникации
                          status:
                            code: 4
                            name: Оплачен
                          amount: 60000
                          date_added_at:
                            unix: 1730399460
                            iso: '2024-10-31T13:11:00+03:00'
                          last_activity_at:
                            unix: null
                            iso: null
                          registered_at:
                            unix: 1698747060
                            iso: '2023-10-31T13:11:00+03:00'
                          progress_percent: 72
                          user:
                            id: 215
                            name: Георгий
                            email: poooga@ya.ru
                            phone: '+79999999952'
                            department: Отдел разработки
                            position: Директор по продукту
                      pagination:
                        page: 1
                        per_page: 200
                        total: 8
                        total_pages: 1
        '400':
          description: Ошибка в запросе (неверные параметры)
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  email:
                    - Некорректный email
                  page:
                    - page must be >= 1
        '403':
          description: Доступ запрещен (недостаточно прав)
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  errors:
                    type: object
                    description: Ошибки валидации по полям
                    example:
                      email:
                        - Email already taken.
                      password:
                        - Password minimum 6 characters.
              example:
                success: false
                errors:
                  access:
                    - Недостаточно прав для выполнения операции
components:
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: X-API-Key
  schemas:
    CreateUserRequest:
      type: object
      required:
        - username
        - email
      properties:
        username:
          type: string
          minLength: 2
          maxLength: 255
          description: |
            Имя пользователя. Обязательное поле.
            - Минимум 2 символа
            - Максимум 255 символов
            - Trim automatically applied
          example: Иван Петров
        email:
          type: string
          format: email
          description: |
            Email пользователя. Должен быть уникальным в системе.
            - Trim automatically applied
            - Valid email format required
          example: ivan.petrov@example.com
        password:
          type: string
          description: |
            Пароль пользователя. Если не указан, генерируется автоматически.
            - Для существующих сотрудников не требуется
            - Для новых пользователей рекомендуется задавать
          example: SecurePassword123!
        role:
          type: string
          description: |
            Роль пользователя в системе. По умолчанию 'user'.
            - Не может быть из списка RESTRICTED_ROLES
            - Доступные роли: superadmin, admin, editor, curator, student
          example: student
          enum:
            - superadmin
            - admin
            - editor
            - curator
            - student
        department:
          type: string
          description: |
            Отдел пользователя. Синхронизируется с LMS.
          example: IT отдел
        position:
          type: string
          description: |
            Должность пользователя. Синхронизируется с LMS.
          example: Разработчик
        phone:
          type: string
          description: |
            Телефон пользователя
          example: +7 (999) 123-45-67
        custom_fields:
          type: object
          description: |
            Дополнительные поля пользователя (custom fields)
            Ключи - это имена полей, значения - данные
          example:
            city: Москва
            experience: 5 лет
            skills:
              - PHP
              - JavaScript
              - MySQL
        group_ids:
          type: array
          description: Список идентификаторов групп, к которым добавляется пользователь
          items:
            type: integer
            minimum: 1
          example:
            - 12
            - 34
        course_ids:
          type: array
          description: Список идентификаторов курсов для назначения
          items:
            type: integer
            minimum: 1
          example:
            - 501
            - 502
    User:
      type: object
      properties:
        id:
          type: integer
          example: 137
        email:
          type: string
          format: email
          example: user@example.com
        name:
          type: string
          example: Иван Иванов
        role:
          type: string
          enum:
            - admin
            - editor
            - curator
            - student
          x-enumDescriptions:
            admin: Администратор (полный доступ)
            editor: Контент-редактор
            curator: Куратор/методист
            student: Ученик/слушатель
          example: student
        status:
          type: string
          enum:
            - active
            - inactive
            - blocked
          x-enumDescriptions:
            active: Активный пользователь
            inactive: Неактивный (архив/черновик)
            blocked: Заблокирован (без доступа)
          example: active
        created_at:
          type: string
          format: date-time
          example: '2024-01-15T10:30:00Z'
        updated_at:
          type: string
          format: date-time
          example: '2024-01-15T10:30:00Z'
    UserList:
      type: object
      properties:
        data:
          type: array
          items:
            type: object
            properties:
              id:
                type: integer
                description: Уникальный идентификатор пользователя
                example: 123
              username:
                type: string
                description: Имя пользователя
                example: Иван Петров
              email:
                type: string
                format: email
                description: Email пользователя
                example: ivan.petrov@example.com
              role:
                type: string
                description: Роль пользователя
                example: student
              status:
                type: string
                description: Статус пользователя
                enum:
                  - active
                  - inactive
                  - blocked
                example: active
              department:
                type: string
                description: Отдел
                example: IT отдел
              position:
                type: string
                description: Должность
                example: Разработчик
              phone:
                type: string
                description: Телефон
                example: +7 (999) 123-45-67
              photo:
                type: string
                format: uri
                description: URL фотографии пользователя (S3)
                example: https://s3.amazonaws.com/bucket/users/photos/123.jpg
              created_at:
                type: string
                format: date-time
                description: Дата создания пользователя
                example: '2025-01-15T10:30:00Z'
              updated_at:
                type: string
                format: date-time
                description: Дата последнего обновления
                example: '2025-01-15T10:30:00Z'
              last_login_at:
                type: string
                format: date-time
                description: Дата последнего входа
                example: '2025-01-16T09:15:00Z'
              email_verified:
                type: boolean
                description: Подтвержден ли email
                example: true
              custom_fields:
                type: object
                description: Дополнительные поля пользователя
                example:
                  city: Москва
                  experience: 5 лет
          description: Массив пользователей
        meta:
          type: object
          properties:
            total:
              type: integer
              description: Общее количество элементов
              example: 150
            page:
              type: integer
              description: Текущая страница
              example: 1
            per-page:
              type: integer
              description: Элементов на странице
              example: 20
    UserImportStatus:
      type: object
      properties:
        id:
          type: integer
          description: ID задачи импорта
          example: 456
        status:
          type: string
          enum:
            - pending
            - processing
            - completed
            - failed
          description: Статус обработки
          example: processing
        progress:
          type: integer
          minimum: 0
          maximum: 100
          description: Прогресс выполнения в процентах
          example: 75
        total_rows:
          type: integer
          description: Всего строк в файле
          example: 150
        processed_rows:
          type: integer
          description: Обработано строк
          example: 112
        errors:
          type: array
          items:
            type: object
            properties:
              row:
                type: integer
                description: Номер строки с ошибкой
              field:
                type: string
                description: Поле с ошибкой
              message:
                type: string
                description: Описание ошибки
          description: Массив ошибок валидации
        created_at:
          type: string
          format: date-time
          description: Время создания задачи
        completed_at:
          type: string
          format: date-time
          description: Время завершения задачи
    UserField:
      type: object
      properties:
        id:
          type: integer
          description: ID поля
          example: 789
        name:
          type: string
          description: Имя поля (system name)
          example: experience_years
        label:
          type: string
          description: Отображаемое название поля
          example: Опыт работы (лет)
        type:
          type: string
          enum:
            - string
            - number
            - date
            - boolean
            - select
          description: Тип поля
          example: number
        required:
          type: boolean
          description: Обязательное ли поле
          example: false
        enabled:
          type: boolean
          description: Активно ли поле
          example: true
        validation_rules:
          type: object
          description: Правила валидации
          example:
            min: 0
            max: 50
        options:
          type: array
          items:
            type: string
          description: Варианты для select полей
          example:
            - 0-1
            - 2-5
            - 6-10
            - 10+
    UserStatus:
      type: object
      properties:
        id:
          type: string
          description: Системный код статуса
          example: active
        name:
          type: string
          description: Отображаемое название статуса
          example: Активный
        description:
          type: string
          description: Расширенное описание статуса
          example: Пользователь с активной учётной записью
        category:
          type: string
          description: Группа статусов (например, access, pending, blocked)
          example: access
        color:
          type: string
          description: Цветовой код статуса (hex)
          example: '#2ea44f'
        is_default:
          type: boolean
          description: Является ли статус статусом по умолчанию при создании
          example: true
      example:
        id: active
        name: Активный
        description: Пользователь с полной активной учётной записью
        category: access
        color: '#2ea44f'
        is_default: true
    Group:
      type: object
      properties:
        id:
          type: integer
          example: 1
        name:
          type: string
          example: Отдел продаж
        description:
          type: string
          example: Сотрудники отдела продаж
        parent_id:
          oneOf:
            - type: integer
              minimum: 1
            - type: 'null'
          example: null
        members_count:
          type: integer
          example: 25
        hierarchy_level:
          type: integer
          example: 0
        created_at:
          type: string
          format: date-time
          example: '2024-01-15T10:30:00Z'
    GroupListItem:
      allOf:
        - type: object
          properties:
            id:
              type: integer
              description: Уникальный идентификатор группы
              example: 1
            name:
              type: string
              description: Название группы
              example: IT Department
            comment:
              type: string
              description: Описание группы
              example: Разработка и поддержка IT систем
            hierarchyPathString:
              type: string
              description: Полный иерархический путь группы
              example: Company / IT Department / Development Team
            userCount:
              type: integer
              description: Количество пользователей в группе
              example: 25
            type:
              type: integer
              description: Тип группы (1=гостевая, 2=авторизованных, 9=по умолчанию)
              example: 2
            parent_id:
              oneOf:
                - type: integer
                  minimum: 1
                - type: 'null'
              description: ID родительской группы
              example: null
            image:
              oneOf:
                - type: string
                  format: uri
                - type: 'null'
              description: URL изображения группы
              example: https://s3.reezonly.com/groups/it-dept.jpg
            created_at:
              type: string
              format: date-time
              description: Дата создания
              example: '2023-08-25T14:15:43Z'
            updated_at:
              type: string
              format: date-time
              description: Дата обновления
              example: '2023-08-25T14:15:43Z'
        - type: object
          properties:
            parent:
              type: object
              description: Информация о родительской группе
              properties:
                id:
                  type: integer
                name:
                  type: string
              nullable: true
    GroupDetail:
      allOf:
        - type: object
          properties:
            id:
              type: integer
              description: Уникальный идентификатор группы
              example: 1
            name:
              type: string
              description: Название группы
              example: IT Department
            comment:
              type: string
              description: Описание группы
              example: Разработка и поддержка IT систем
            hierarchyPathString:
              type: string
              description: Полный иерархический путь группы
              example: Company / IT Department / Development Team
            userCount:
              type: integer
              description: Количество пользователей в группе
              example: 25
            type:
              type: integer
              description: Тип группы (1=гостевая, 2=авторизованных, 9=по умолчанию)
              example: 2
            parent_id:
              oneOf:
                - type: integer
                  minimum: 1
                - type: 'null'
              description: ID родительской группы
              example: null
            image:
              oneOf:
                - type: string
                  format: uri
                - type: 'null'
              description: URL изображения группы
              example: https://s3.reezonly.com/groups/it-dept.jpg
            created_at:
              type: string
              format: date-time
              description: Дата создания
              example: '2023-08-25T14:15:43Z'
            updated_at:
              type: string
              format: date-time
              description: Дата обновления
              example: '2023-08-25T14:15:43Z'
        - type: object
          properties:
            users:
              type: array
              description: Список пользователей группы
              items:
                allOf:
                  - type: object
                    properties:
                      id:
                        type: integer
                        example: 137
                      email:
                        type: string
                        format: email
                        example: user@example.com
                      name:
                        type: string
                        example: Иван Иванов
                      role:
                        type: string
                        enum:
                          - admin
                          - editor
                          - curator
                          - student
                        x-enumDescriptions:
                          admin: Администратор (полный доступ)
                          editor: Контент-редактор
                          curator: Куратор/методист
                          student: Ученик/слушатель
                        example: student
                      status:
                        type: string
                        enum:
                          - active
                          - inactive
                          - blocked
                        x-enumDescriptions:
                          active: Активный пользователь
                          inactive: Неактивный (архив/черновик)
                          blocked: Заблокирован (без доступа)
                        example: active
                      created_at:
                        type: string
                        format: date-time
                        example: '2024-01-15T10:30:00Z'
                      updated_at:
                        type: string
                        format: date-time
                        example: '2024-01-15T10:30:00Z'
                  - type: object
                    properties:
                      role_in_group:
                        type: string
                        description: Роль пользователя в группе
                      joined_at:
                        type: string
                        format: date-time
                        description: Дата добавления в группу
            children:
              type: array
              description: Дочерние группы
              items:
                allOf:
                  - type: object
                    properties:
                      id:
                        type: integer
                        description: Уникальный идентификатор группы
                        example: 1
                      name:
                        type: string
                        description: Название группы
                        example: IT Department
                      comment:
                        type: string
                        description: Описание группы
                        example: Разработка и поддержка IT систем
                      hierarchyPathString:
                        type: string
                        description: Полный иерархический путь группы
                        example: Company / IT Department / Development Team
                      userCount:
                        type: integer
                        description: Количество пользователей в группе
                        example: 25
                      type:
                        type: integer
                        description: Тип группы (1=гостевая, 2=авторизованных, 9=по умолчанию)
                        example: 2
                      parent_id:
                        oneOf:
                          - type: integer
                            minimum: 1
                          - type: 'null'
                        description: ID родительской группы
                        example: null
                      image:
                        oneOf:
                          - type: string
                            format: uri
                          - type: 'null'
                        description: URL изображения группы
                        example: https://s3.reezonly.com/groups/it-dept.jpg
                      created_at:
                        type: string
                        format: date-time
                        description: Дата создания
                        example: '2023-08-25T14:15:43Z'
                      updated_at:
                        type: string
                        format: date-time
                        description: Дата обновления
                        example: '2023-08-25T14:15:43Z'
                  - type: object
                    properties:
                      parent:
                        type: object
                        description: Информация о родительской группе
                        properties:
                          id:
                            type: integer
                          name:
                            type: string
                        nullable: true
            rules:
              type: array
              description: Правила доступа группы
              items:
                type: object
                properties:
                  type:
                    type: integer
                  objectId:
                    type: integer
                  objectType:
                    type: string
    GroupHierarchyItem:
      type: object
      properties:
        id:
          type: integer
          description: ID группы
        name:
          type: string
          description: Название группы
        parent_id:
          oneOf:
            - type: integer
            - type: 'null'
          description: ID родительской группы
        level:
          type: integer
          description: Уровень вложенности (0=корневой)
          example: 0
        has_children:
          type: boolean
          description: Наличие дочерних групп
          example: true
        userCount:
          type: integer
          description: Количество пользователей
          example: 15
    CreateGroupRequest:
      type: object
      required:
        - name
      properties:
        name:
          type: string
          minLength: 2
          maxLength: 255
          description: Название группы (обязательное поле)
          example: Marketing Department
        comment:
          type: string
          maxLength: 512
          description: Описание группы (опционально)
          example: Отдел маркетинга и продвижения
        parent_id:
          oneOf:
            - type: integer
              minimum: 1
            - type: 'null'
          description: |
            ID родительской группы:
            - `null` для корневой группы
            - ID существующей группы для дочерней
          example: null
        user_ids:
          type: array
          items:
            type: integer
            minimum: 1
          maxItems: 100
          description: Массив ID пользователей для добавления в группу (максимум 100)
          example:
            - 101
            - 102
            - 103
        image_upload:
          type: string
          format: binary
          description: Файл изображения группы (через multipart/form-data)
    UserGroupOperationRequest:
      oneOf:
        - type: object
          description: Операция с одной группой
          required:
            - id
            - userIds
          properties:
            id:
              type: integer
              minimum: 1
              description: ID группы
            userIds:
              type: array
              items:
                type: integer
                minimum: 1
              maxItems: 100
              description: Массив ID пользователей (максимум 100)
        - type: object
          description: Операция с несколькими группами
          required:
            - userIds
            - groupIds
          properties:
            userIds:
              type: array
              items:
                type: integer
                minimum: 1
              maxItems: 100
              description: Массив ID пользователей (максимум 100)
            groupIds:
              type: array
              items:
                type: integer
                minimum: 1
              maxItems: 10
              description: Массив ID групп (максимум 10)
    GroupMemberStats:
      type: object
      properties:
        count:
          type: integer
          description: Общее количество участников
          example: 25
        active_count:
          type: integer
          description: Количество активных участников
          example: 22
        inactive_count:
          type: integer
          description: Количество неактивных участников
          example: 3
        subgroup_users:
          type: integer
          description: Количество пользователей из дочерних групп (если include_subgroups=true)
          example: 15
        last_updated:
          type: string
          format: date-time
          description: Время последнего обновления статистики
          example: '2023-11-19T10:30:00Z'
    PageType:
      type: object
      properties:
        id:
          type: integer
          example: 3
        name:
          type: string
          example: product-page
    DictionaryPage:
      type: object
      properties:
        id:
          type: integer
          example: 12
        alias:
          type: string
          example: product-page-42
        title:
          type: string
          example: Курс "Data Science"
        description:
          type: string
          example: Лендинг продукта Data Science
        enabled:
          type: boolean
          example: true
        type:
          type: string
          description: Тип страницы (используйте справочник page-types)
          example: course-and-training-promo-page
    SuccessResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: object
          description: Данные ответа
        meta:
          type: object
          properties:
            total:
              type: integer
              description: Общее количество элементов
              example: 150
            page:
              type: integer
              description: Текущая страница
              example: 1
            per-page:
              type: integer
              description: Элементов на странице
              example: 20
    ErrorResponse:
      type: object
      properties:
        success:
          type: boolean
          example: false
        errors:
          type: object
          description: Ошибки валидации по полям
          example:
            email:
              - Email already taken.
            password:
              - Password minimum 6 characters.
    PaginationMeta:
      type: object
      properties:
        total:
          type: integer
          description: Общее количество элементов
          example: 150
        page:
          type: integer
          description: Текущая страница
          example: 1
        per-page:
          type: integer
          description: Элементов на странице
          example: 20
    Certificate:
      type: object
      properties:
        id:
          type: integer
          example: 1
        title:
          type: string
          example: Сертификат о прохождении курса
        description:
          type: string
          example: Выдан за успешное завершение курса
        issued_at:
          type: string
          format: date-time
          example: '2024-01-15T10:30:00Z'
        status:
          type: string
          enum:
            - issued
            - revoked
            - expired
          x-enumDescriptions:
            issued: Сертификат выдан
            revoked: Сертификат отозван
            expired: Срок действия истёк
          example: issued
    DateValue:
      type: object
      properties:
        unix:
          type: integer
          nullable: true
          example: 1730399460
        iso:
          type: string
          nullable: true
          example: '2024-10-31T13:11:00+03:00'
    ImportStatus:
      type: object
      properties:
        id:
          type: string
          example: import_123456
        status:
          type: string
          enum:
            - pending
            - processing
            - completed
            - failed
          x-enumDescriptions:
            pending: Задача создана, ожидает запуска
            processing: Импорт выполняется
            completed: Импорт успешно завершён
            failed: Импорт завершился ошибкой
          example: processing
        progress:
          type: object
          properties:
            total:
              type: integer
              example: 1000
            processed:
              type: integer
              example: 650
            errors:
              type: integer
              example: 5
        started_at:
          type: string
          format: date-time
          example: '2024-01-15T10:30:00Z'
        estimated_completion:
          type: string
          format: date-time
          example: '2024-01-15T11:00:00Z'
    FileUploadResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        file_id:
          type: string
          example: file_abc123
        filename:
          type: string
          example: users_import.xlsx
        size:
          type: integer
          example: 25600
        mime_type:
          type: string
          example: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet
  parameters:
    Page:
      in: query
      name: page
      description: Номер страницы для пагинации
      required: false
      schema:
        type: integer
        minimum: 1
        default: 1
        example: 1
    PerPage:
      in: query
      name: per-page
      description: Количество элементов на странице (максимум 100)
      required: false
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 20
        example: 50
    Search:
      in: query
      name: search
      description: Поисковый запрос для фильтрации результатов
      required: false
      schema:
        type: string
        example: ivan
    Id:
      in: query
      name: id
      description: Идентификатор ресурса
      required: true
      schema:
        type: integer
        minimum: 1
        example: 42
    PathId:
      in: path
      name: id
      description: Идентификатор ресурса в URL пути
      required: true
      schema:
        type: integer
        minimum: 1
        example: 42
    Ids:
      in: query
      name: ids[]
      description: Массив идентификаторов для массовых операций (максимум 100 элементов)
      required: true
      schema:
        type: array
        items:
          type: integer
          minimum: 1
        maxItems: 100
        example:
          - 12
          - 15
          - 20
    ParentId:
      in: query
      name: parent_id
      description: ID родительского элемента (null для корневого уровня)
      required: false
      schema:
        oneOf:
          - type: integer
            minimum: 1
          - type: 'null'
        example: null
    ShowDefault:
      in: query
      name: showDefault
      description: Показать стандартные элементы (0|1)
      required: false
      schema:
        type: integer
        enum:
          - 0
          - 1
        default: 0
        example: 1
  responses:
    Success:
      description: Успешное выполнение операции
      content:
        application/json:
          schema:
            allOf:
              - type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    description: Данные ответа
                  meta:
                    type: object
                    properties:
                      total:
                        type: integer
                        description: Общее количество элементов
                        example: 150
                      page:
                        type: integer
                        description: Текущая страница
                        example: 1
                      per-page:
                        type: integer
                        description: Элементов на странице
                        example: 20
              - type: object
                properties:
                  message:
                    type: string
                    example: Operation completed successfully
    Created:
      description: Ресурс успешно создан
      content:
        application/json:
          schema:
            allOf:
              - type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    description: Данные ответа
                  meta:
                    type: object
                    properties:
                      total:
                        type: integer
                        description: Общее количество элементов
                        example: 150
                      page:
                        type: integer
                        description: Текущая страница
                        example: 1
                      per-page:
                        type: integer
                        description: Элементов на странице
                        example: 20
              - type: object
                properties:
                  message:
                    type: string
                    example: Resource created successfully
    UserList:
      description: Список пользователей успешно получен
      content:
        application/json:
          schema:
            allOf:
              - type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    description: Данные ответа
                  meta:
                    type: object
                    properties:
                      total:
                        type: integer
                        description: Общее количество элементов
                        example: 150
                      page:
                        type: integer
                        description: Текущая страница
                        example: 1
                      per-page:
                        type: integer
                        description: Элементов на странице
                        example: 20
              - type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          example: 137
                        email:
                          type: string
                          format: email
                          example: user@example.com
                        name:
                          type: string
                          example: Иван Иванов
                        role:
                          type: string
                          enum:
                            - admin
                            - editor
                            - curator
                            - student
                          x-enumDescriptions:
                            admin: Администратор (полный доступ)
                            editor: Контент-редактор
                            curator: Куратор/методист
                            student: Ученик/слушатель
                          example: student
                        status:
                          type: string
                          enum:
                            - active
                            - inactive
                            - blocked
                          x-enumDescriptions:
                            active: Активный пользователь
                            inactive: Неактивный (архив/черновик)
                            blocked: Заблокирован (без доступа)
                          example: active
                        created_at:
                          type: string
                          format: date-time
                          example: '2024-01-15T10:30:00Z'
                        updated_at:
                          type: string
                          format: date-time
                          example: '2024-01-15T10:30:00Z'
    GroupList:
      description: Список групп успешно получен
      content:
        application/json:
          schema:
            allOf:
              - type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    description: Данные ответа
                  meta:
                    type: object
                    properties:
                      total:
                        type: integer
                        description: Общее количество элементов
                        example: 150
                      page:
                        type: integer
                        description: Текущая страница
                        example: 1
                      per-page:
                        type: integer
                        description: Элементов на странице
                        example: 20
              - type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          example: 1
                        name:
                          type: string
                          example: Отдел продаж
                        description:
                          type: string
                          example: Сотрудники отдела продаж
                        parent_id:
                          oneOf:
                            - type: integer
                              minimum: 1
                            - type: 'null'
                          example: null
                        members_count:
                          type: integer
                          example: 25
                        hierarchy_level:
                          type: integer
                          example: 0
                        created_at:
                          type: string
                          format: date-time
                          example: '2024-01-15T10:30:00Z'
    CertificateList:
      description: Список сертификатов успешно получен
      content:
        application/json:
          schema:
            allOf:
              - type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    description: Данные ответа
                  meta:
                    type: object
                    properties:
                      total:
                        type: integer
                        description: Общее количество элементов
                        example: 150
                      page:
                        type: integer
                        description: Текущая страница
                        example: 1
                      per-page:
                        type: integer
                        description: Элементов на странице
                        example: 20
              - type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          example: 1
                        title:
                          type: string
                          example: Сертификат о прохождении курса
                        description:
                          type: string
                          example: Выдан за успешное завершение курса
                        issued_at:
                          type: string
                          format: date-time
                          example: '2024-01-15T10:30:00Z'
                        status:
                          type: string
                          enum:
                            - issued
                            - revoked
                            - expired
                          x-enumDescriptions:
                            issued: Сертификат выдан
                            revoked: Сертификат отозван
                            expired: Срок действия истёк
                          example: issued
    BadRequest:
      description: Ошибка в запросе (неверные параметры)
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: false
              errors:
                type: object
                description: Ошибки валидации по полям
                example:
                  email:
                    - Email already taken.
                  password:
                    - Password minimum 6 characters.
          example:
            success: false
            errors:
              email:
                - Некорректный email
              page:
                - page must be >= 1
    Unauthorized:
      description: Ошибка аутентификации (отсутствует или неверный API ключ)
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: false
              errors:
                type: object
                description: Ошибки валидации по полям
                example:
                  email:
                    - Email already taken.
                  password:
                    - Password minimum 6 characters.
          example:
            success: false
            errors:
              api_key:
                - Неверный или отсутствующий X-API-Key
    Forbidden:
      description: Доступ запрещен (недостаточно прав)
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: false
              errors:
                type: object
                description: Ошибки валидации по полям
                example:
                  email:
                    - Email already taken.
                  password:
                    - Password minimum 6 characters.
          example:
            success: false
            errors:
              access:
                - Недостаточно прав для выполнения операции
    NotFound:
      description: Ресурс не найден
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: false
              errors:
                type: object
                description: Ошибки валидации по полям
                example:
                  email:
                    - Email already taken.
                  password:
                    - Password minimum 6 characters.
          example:
            success: false
            errors:
              id:
                - Ресурс не найден
    ValidationError:
      description: Ошибка валидации данных
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: false
              errors:
                type: object
                description: Ошибки валидации по полям
                example:
                  email:
                    - Email already taken.
                  password:
                    - Password minimum 6 characters.
          example:
            success: false
            errors:
              password:
                - Password must be at least 6 characters
    InternalError:
      description: Внутренняя ошибка сервера
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: false
              errors:
                type: object
                description: Ошибки валидации по полям
                example:
                  email:
                    - Email already taken.
                  password:
                    - Password minimum 6 characters.
          example:
            success: false
            errors:
              server:
                - Internal server error. Try again later
    TooManyRequests:
      description: Превышен лимит запросов
      headers:
        Retry-After:
          description: Через сколько секунд можно повторить запрос
          schema:
            type: integer
            example: 30
      content:
        application/json:
          schema:
            type: object
            properties:
              success:
                type: boolean
                example: false
              errors:
                type: object
                description: Ошибки валидации по полям
                example:
                  email:
                    - Email already taken.
                  password:
                    - Password minimum 6 characters.
          example:
            success: false
            errors:
              rate_limit:
                - Превышен лимит запросов. Повторите через 30 секунд
x-tagGroups:
  - name: Users
    title: User Management — 16 методов
    description: |-
      Раздел User Management предназначен для синхронизации пользователей между вашей CRM/ERP и платформой Space. Каждый пользователь имеет профиль с контактной информацией, роль доступа, статус и может быть участником групп и курсов.

      User представляет пользователя в системе Reezonly Space. Каждый пользователь имеет профиль с контактной информацией, роль доступа, статус и может быть участником групп и курсов.
    tags:
      - Users.Operations
      - Users.Courses
      - Users.Import
      - Users.Fields
  - name: Groups
    title: Groups — 12 методов
    description: |-
      Раздел Groups предназначен для управления иерархической структурой групп пользователей в системе Space. Группы могут иметь вложенность, что позволяет создавать сложные организационные структуры.

      Group представляет собой коллекцию пользователей с общей ролью или принадлежностью к отделу/проекту. Группы поддерживают иерархическую структуру с неограниченной вложенностью.
    tags:
      - Groups.Structure
      - Groups.Members
  - name: Certificates
    title: Certificates — 12 методов
    description: |-
      Раздел Certificates предназначен для управления PDF сертификатами, которые выдаются пользователям за прохождение курсов. Система поддерживает шаблоны сертификатов, массовую и индивидуальную выдачу, а также интеграцию с внешними системами верификации.

      Certificate представляет собой PDF документ, подтверждающий успешное завершение обучения. Каждый сертификат имеет уникальный номер, дату выдачи и может быть проверен через публичный интерфейс.
    tags:
      - Certificates.Templates
      - Certificates.Issued
      - Certificates.Lookups
  - name: Learning
    title: Learning — 4 метода (READ-ONLY)
    description: |-
      Раздел Learning предоставляет доступ к каталогу курсов и страниц контента в режиме чтения. Основной контент курсов хранится во внешней LMS системе, а Space выступает как витрина и система управления доступом.

      ⚠️ Важно: Эти методы доступны только для чтения. Изменение контента курсов и уроков выполняется через LMS, а не через этот API.
    tags:
      - Courses
      - Pages
  - name: Integration Reports
    title: Integration Reports — 1 метод
    description: Раздел Integration Reports предназначен для предоставления аналитических данных внешним системам. Этот модуль позволяет получать отчеты об интеграционной активности, результатах импорта и экспорта данных, а также ключевые метрики для мониторинга работы интеграций.
    tags:
      - Integration Reports
